import{_ as w,r as c,x as f,o as n,c as i,a as t,t as l,g as y,K as x,u as S,F as k,b as C,j as M,l as N}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as R,a as D,S as B}from"./central-v1-ce42f893.js";const L={class:"report-page"},T={class:"stats-grid"},V={class:"stat-card"},z={class:"stat-content"},A={class:"stat-value"},E={class:"stat-card"},U={class:"stat-content"},F={class:"stat-value"},H={class:"stat-card"},I={class:"stat-content"},j={class:"stat-value"},K={class:"stat-card"},P={class:"stat-content"},W={class:"stat-value"},Y={class:"filters-bar"},$={key:0,class:"loading-overlay"},q={key:1,class:"report-content"},G={class:"report-section"},J={class:"table-container"},O={class:"report-table"},Q={key:0},X={class:"tenant-badge"},Z=["onClick"],tt={__name:"SubscriptionsReport",setup(st){R();const d=c(!1),a=c(null),r=c("all"),u=async()=>{d.value=!0;try{const o={};r.value!=="all"&&(o.range=r.value);const s=await D.reports.subscriptions();s.data.success&&(a.value=s.data.data)}catch(o){console.error("Error fetching report:",o)}finally{d.value=!1}},v=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",h=o=>{console.log("View subscription:",o)},g=()=>{alert("Export functionality will be implemented")};return f(()=>{u()}),(o,s)=>{var p,_,b,m;return n(),i("div",L,[t("div",{class:"page-header"},[s[1]||(s[1]=t("div",null,[t("h1",{class:"page-title"},"ğŸ“® Subscriptions Report"),t("p",{class:"page-subtitle"},"Subscriptions statistics and analytics")],-1)),t("div",{class:"header-actions"},[t("button",{class:"btn btn-secondary",onClick:g}," ğŸ“¥ Export Report ")])]),t("div",T,[t("div",V,[s[3]||(s[3]=t("div",{class:"stat-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),t("div",z,[t("div",A,l(((p=a.value)==null?void 0:p.total_subscriptions)||0),1),s[2]||(s[2]=t("div",{class:"stat-label"},"Total Subscriptions",-1))])]),t("div",E,[s[5]||(s[5]=t("div",{class:"stat-icon success"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})])],-1)),t("div",U,[t("div",F,l(((_=a.value)==null?void 0:_.active_subscriptions)||0),1),s[4]||(s[4]=t("div",{class:"stat-label"},"Active Subscriptions",-1))])]),t("div",H,[s[7]||(s[7]=t("div",{class:"stat-icon warning"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z","clip-rule":"evenodd"})])],-1)),t("div",I,[t("div",j,l(((b=a.value)==null?void 0:b.expired_subscriptions)||0),1),s[6]||(s[6]=t("div",{class:"stat-label"},"Expired Subscriptions",-1))])]),t("div",K,[s[9]||(s[9]=t("div",{class:"stat-icon info"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})])],-1)),t("div",P,[t("div",W,l(((m=a.value)==null?void 0:m.new_subscriptions_this_month)||0),1),s[8]||(s[8]=t("div",{class:"stat-label"},"New This Month",-1))])])]),t("div",Y,[y(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),class:"filter-select",onChange:u},s[10]||(s[10]=[S('<option value="all" data-v-b6b89e45>All Time</option><option value="today" data-v-b6b89e45>Today</option><option value="week" data-v-b6b89e45>This Week</option><option value="month" data-v-b6b89e45>This Month</option><option value="year" data-v-b6b89e45>This Year</option>',5)]),544),[[x,r.value]]),t("button",{class:"btn btn-primary",onClick:u}," ğŸ”„ Refresh ")]),d.value?(n(),i("div",$,s[11]||(s[11]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading report...",-1)]))):a.value?(n(),i("div",q,[t("div",G,[s[14]||(s[14]=t("h3",null,"Subscription Details",-1)),t("div",J,[t("table",O,[s[13]||(s[13]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"User"),t("th",null,"Tenant"),t("th",null,"Plan"),t("th",null,"Status"),t("th",null,"Start Date"),t("th",null,"Expiry Date"),t("th",null,"Actions")])],-1)),t("tbody",null,[a.value.subscriptions&&a.value.subscriptions.length===0?(n(),i("tr",Q,s[12]||(s[12]=[t("td",{colspan:"8",class:"empty-cell"}," No subscriptions found ",-1)]))):(n(!0),i(k,{key:1},C(a.value.subscriptions||[],e=>(n(),i("tr",{key:e.id},[t("td",null,l(e.id),1),t("td",null,l(e.user_name||"N/A"),1),t("td",null,[t("span",X,l(e.tenant_id||"N/A"),1)]),t("td",null,l(e.plan_name||e.package_name||"N/A"),1),t("td",null,[N(B,{status:e.status||"active"},null,8,["status"])]),t("td",null,l(v(e.start_date||e.created_at)),1),t("td",null,l(v(e.expiry_date||e.expire_date)),1),t("td",null,[t("button",{class:"btn-icon",onClick:et=>h(e),title:"View"}," ğŸ‘ï¸ ",8,Z)])]))),128))])])])])])):M("",!0)])}}},ot=w(tt,[["__scopeId","data-v-b6b89e45"]]);export{ot as default};
