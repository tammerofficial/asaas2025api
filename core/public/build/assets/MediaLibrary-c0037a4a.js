import{_ as M,r as d,p as T,x as k,k as F,o as l,c as r,a as o,f as x,g as U,h as L,F as S,b as B,j as C,l as D,t as b}from"./_plugin-vue_export-helper-335f4554.js";import{a as p}from"./central-v1-c4e0d34f.js";import{T as E}from"./Toast-2332f712.js";const N={name:"MediaLibrary",components:{Toast:E},setup(){const n=d(!1),t=d([]),u=d(""),s=d(!1),h=d("success"),y=d(""),m=d(""),e=async()=>{n.value=!0;try{const a=await p.media.list({search:u.value});a.data.success&&(t.value=a.data.data.data||a.data.data||[])}catch(a){console.error("Error fetching media:",a),c("error","Error","Failed to load media")}finally{n.value=!1}},f=async a=>{const i=a.target.files;if(i.length){n.value=!0;try{for(const _ of i){const g=new FormData;g.append("file",_),await p.media.upload(g)}c("success","Success",`${i.length} file(s) uploaded successfully`),e()}catch{c("error","Error","Failed to upload files")}finally{n.value=!1}}},v=async a=>{if(confirm("Are you sure you want to delete this media file?"))try{await p.media.delete(a),c("success","Success","Media deleted successfully"),e()}catch{c("error","Error","Failed to delete media")}},w=a=>{if(!a)return"-";const i=a/1024;return i<1024?`${i.toFixed(2)} KB`:`${(i/1024).toFixed(2)} MB`},c=(a,i,_)=>{h.value=a,y.value=i,m.value=_,s.value=!0};return T(u,()=>{e()}),k(()=>{e()}),{loading:n,media:t,searchQuery:u,showToast:s,toastType:h,toastTitle:y,toastMessage:m,handleFileUpload:f,deleteMedia:v,formatSize:w}}},V={class:"media-library-page"},z={class:"page-header"},Q={class:"header-actions"},j={class:"btn-primary"},A={class:"filters-bar"},I={key:0,class:"loading"},K={key:1,class:"media-grid"},W={class:"media-preview"},q=["src","alt"],G={key:1,class:"file-icon"},H={class:"media-info"},J={class:"media-title"},O={class:"media-size"},P={class:"media-actions"},R=["onClick"],X={key:0,class:"empty-state"};function Y(n,t,u,s,h,y){const m=F("Toast");return l(),r("div",V,[o("div",z,[t[4]||(t[4]=o("h2",null,"ðŸ–¼ï¸ Media Library",-1)),o("div",Q,[o("label",j,[t[3]||(t[3]=x(" ðŸ“¤ Upload Files ")),o("input",{type:"file",multiple:"",onChange:t[0]||(t[0]=(...e)=>s.handleFileUpload&&s.handleFileUpload(...e)),style:{display:"none"}},null,32)])])]),o("div",A,[U(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.searchQuery=e),type:"text",placeholder:"Search media...",class:"search-input"},null,512),[[L,s.searchQuery]])]),s.loading?(l(),r("div",I,"Loading media...")):(l(),r("div",K,[(l(!0),r(S,null,B(s.media,e=>{var f;return l(),r("div",{key:e.id,class:"media-item"},[o("div",W,[(f=e.type)!=null&&f.startsWith("image")?(l(),r("img",{key:0,src:e.url,alt:e.title},null,8,q)):(l(),r("div",G,"ðŸ“„"))]),o("div",H,[o("p",J,b(e.title||"Untitled"),1),o("p",O,b(s.formatSize(e.size)),1)]),o("div",P,[o("button",{onClick:v=>s.deleteMedia(e.id),class:"btn-sm btn-danger"},"Delete",8,R)])])}),128)),s.media.length===0?(l(),r("div",X,"No media files found")):C("",!0)])),D(m,{show:s.showToast,"onUpdate:show":t[2]||(t[2]=e=>s.showToast=e),type:s.toastType,title:s.toastTitle,message:s.toastMessage},null,8,["show","type","title","message"])])}const se=M(N,[["render",Y],["__scopeId","data-v-b06bd0bb"]]);export{se as default};
