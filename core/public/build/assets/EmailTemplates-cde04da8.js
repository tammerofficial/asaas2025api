import{_ as D,r as o,x as q,o as n,c as i,a as e,F as B,b as F,t as r,w,f as y,g as c,h,K as $,L as H,j as M,l as S}from"./_plugin-vue_export-helper-80b3f0a9.js";import{a as P,S as I}from"./central-v1-ce42f893.js";import{T as W}from"./Toast-da97317a.js";const G={class:"email-templates-page"},K={class:"page-header"},z={class:"page-actions"},J={class:"table-container"},O={key:0,class:"loading-overlay"},Q={key:1,class:"templates-table"},R={key:0},X={class:"template-name"},Y={class:"template-subject"},Z={class:"type-badge"},ee={class:"action-buttons"},te=["onClick"],se=["onClick"],le=["onClick"],ae={class:"modal-header"},oe={class:"form-group"},ne={class:"form-group"},ie={class:"form-group"},re={class:"form-group"},ue={class:"form-group"},de={class:"form-checkbox"},ce={class:"form-actions"},ve=["disabled"],me={class:"modal-body"},pe={class:"preview-content"},be={class:"preview-subject"},ye=["innerHTML"],fe={__name:"EmailTemplates",setup(ge){const v=o([]),f=o(!1),g=o(!1),m=o(!1),d=o(null),p=o(!1),_=o(!1),C=o("success"),E=o(""),j=o(""),a=o({id:null,name:"",subject:"",body:"",type:"general",status:!0}),T=async()=>{f.value=!0;try{const s=await P.settings.get({type:"email_templates"});s.data.success&&(v.value=s.data.data||[])}catch(s){console.error("Error loading templates:",s),v.value=[],u("error","Error","Failed to load templates")}finally{f.value=!1}},N=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",V=s=>{a.value={id:s.id,name:s.name||s.title,subject:s.subject||"",body:s.body||s.content||"",type:s.type||"general",status:s.status!==!1},m.value=!0},L=s=>{d.value=s},k=()=>{d.value=null},U=async s=>{if(confirm(`Are you sure you want to delete template "${s.name||s.title}"?`))try{u("success","Success","Template deleted successfully"),await T()}catch(t){console.error("Error deleting template:",t),u("error","Error","Failed to delete template")}},A=async()=>{p.value=!0;try{a.value.id?u("success","Success","Template updated successfully"):u("success","Success","Template created successfully"),b(),await T()}catch(s){console.error("Error saving template:",s),u("error","Error","Failed to save template")}finally{p.value=!1}},b=()=>{g.value=!1,m.value=!1,a.value={id:null,name:"",subject:"",body:"",type:"general",status:!0}},u=(s,t,l)=>{C.value=s,E.value=t,j.value=l,_.value=!0};return q(()=>{T()}),(s,t)=>(n(),i("div",G,[e("div",K,[t[9]||(t[9]=e("div",null,[e("h1",{class:"page-title"},"ðŸ“§ Email Templates"),e("p",{class:"page-subtitle"},"Manage email templates")],-1)),e("div",z,[e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=l=>g.value=!0)}," âž• Add New Template ")])]),e("div",J,[f.value?(n(),i("div",O,t[10]||(t[10]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading templates...",-1)]))):(n(),i("table",Q,[t[12]||(t[12]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Subject"),e("th",null,"Type"),e("th",null,"Status"),e("th",null,"Created At"),e("th",null,"Actions")])],-1)),e("tbody",null,[v.value.length===0?(n(),i("tr",R,t[11]||(t[11]=[e("td",{colspan:"7",class:"empty-cell"}," No email templates found ",-1)]))):(n(!0),i(B,{key:1},F(v.value,l=>(n(),i("tr",{key:l.id},[e("td",null,r(l.id),1),e("td",null,[e("div",X,[e("strong",null,r(l.name||l.title),1)])]),e("td",null,[e("div",Y,r(l.subject||"-"),1)]),e("td",null,[e("span",Z,r(l.type||"general"),1)]),e("td",null,[S(I,{status:l.status||"active"},null,8,["status"])]),e("td",null,r(N(l.created_at)),1),e("td",null,[e("div",ee,[e("button",{class:"btn-icon",onClick:x=>V(l),title:"Edit"}," âœï¸ ",8,te),e("button",{class:"btn-icon",onClick:x=>L(l),title:"Preview"}," ðŸ‘ï¸ ",8,se),e("button",{class:"btn-icon btn-danger",onClick:x=>U(l),title:"Delete"}," ðŸ—‘ï¸ ",8,le)])])]))),128))])]))]),g.value||m.value?(n(),i("div",{key:0,class:"modal-overlay",onClick:b},[e("div",{class:"modal-content modal-large",onClick:t[6]||(t[6]=w(()=>{},["stop"]))},[e("div",ae,[e("h3",null,r(m.value?"âœï¸ Edit Template":"âž• Add New Template"),1),e("button",{class:"modal-close",onClick:b},"Ã—")]),e("form",{onSubmit:w(A,["prevent"]),class:"modal-form"},[e("div",oe,[t[13]||(t[13]=e("label",{class:"form-label"},[y("Template Name "),e("span",{class:"required"},"*")],-1)),c(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>a.value.name=l),class:"form-input",placeholder:"e.g., Welcome Email",required:""},null,512),[[h,a.value.name]])]),e("div",ne,[t[14]||(t[14]=e("label",{class:"form-label"},[y("Subject "),e("span",{class:"required"},"*")],-1)),c(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>a.value.subject=l),class:"form-input",placeholder:"Email subject",required:""},null,512),[[h,a.value.subject]])]),e("div",ie,[t[16]||(t[16]=e("label",{class:"form-label"},"Type",-1)),c(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.type=l),class:"form-select"},t[15]||(t[15]=[e("option",{value:"general"},"General",-1),e("option",{value:"welcome"},"Welcome",-1),e("option",{value:"notification"},"Notification",-1),e("option",{value:"transactional"},"Transactional",-1)]),512),[[$,a.value.type]])]),e("div",re,[t[17]||(t[17]=e("label",{class:"form-label"},[y("Body (HTML) "),e("span",{class:"required"},"*")],-1)),c(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.body=l),class:"form-textarea",rows:"12",placeholder:"Enter email template body (HTML supported)",required:""},null,512),[[h,a.value.body]]),t[18]||(t[18]=e("small",{class:"form-help"},"Use {name}, {email} etc. for dynamic variables",-1))]),e("div",ue,[e("label",de,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=l=>a.value.status=l),class:"checkbox-input"},null,512),[[H,a.value.status]]),t[19]||(t[19]=e("span",null,"Active",-1))])]),e("div",ce,[e("button",{type:"submit",class:"btn btn-primary",disabled:p.value},r(p.value?"Saving...":"Save Template"),9,ve),e("button",{type:"button",class:"btn btn-secondary",onClick:b}," Cancel ")])],32)])])):M("",!0),d.value?(n(),i("div",{key:1,class:"modal-overlay",onClick:k},[e("div",{class:"modal-content modal-large",onClick:t[7]||(t[7]=w(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[20]||(t[20]=e("h3",null,"ðŸ‘ï¸ Preview Template",-1)),e("button",{class:"modal-close",onClick:k},"Ã—")]),e("div",me,[e("div",pe,[e("div",be,[t[21]||(t[21]=e("strong",null,"Subject:",-1)),y(" "+r(d.value.subject),1)]),e("div",{class:"preview-body",innerHTML:d.value.body},null,8,ye)])]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:k},"Close")])])])):M("",!0),S(W,{show:_.value,"onUpdate:show":t[8]||(t[8]=l=>_.value=l),type:C.value,title:E.value,message:j.value},null,8,["show","type","title","message"])]))}},we=D(fe,[["__scopeId","data-v-4f2a5c2d"]]);export{we as default};
