import{_ as w,r as d,x as A,k as T,o,c as r,a as e,l as m,J as F,g as y,h as $,K as L,F as M,b as V,t as l,j as I,f as B,n as E}from"./_plugin-vue_export-helper-25c71bc9.js";import{u as U,a as f,S as K}from"./central-v1-43971805.js";const j={class:"packages-page"},z={class:"page-header"},J={class:"page-actions"},Q={class:"filters-bar"},R={class:"search-box"},W={class:"table-container"},Y={key:0,class:"loading-overlay"},q={key:1,class:"packages-table"},G={key:0},H={class:"package-title"},O={class:"price-text"},X={class:"features-count"},Z={class:"action-buttons"},ee=["onClick"],te=["onClick"],ae={key:0,class:"pagination"},se=["disabled"],ne={class:"pagination-info"},le=["disabled"],oe={__name:"PackagesList",setup(re){const h=U(),c=d([]),p=d(!1),v=d(""),g=d(""),n=d({current_page:1,last_page:1,per_page:20,total:0});let _=null;const i=async(s=1)=>{p.value=!0;try{const t={page:s,per_page:n.value.per_page};v.value&&(t.search=v.value),g.value!==""&&(t.status=g.value);const u=await f.packages.list(t);u.data.success&&(c.value=u.data.data||[],u.data.meta&&(n.value=u.data.meta))}catch(t){console.error("Error loading packages:",t),c.value=[]}finally{p.value=!1}},b=()=>{clearTimeout(_),_=setTimeout(()=>{i(1)},500)},k=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KWD",minimumFractionDigits:3,maximumFractionDigits:3}).format(s||0),x=s=>s===1||s==="yearly"?"Yearly":"Monthly",C=s=>s===1||s==="yearly"?"yearly":"monthly",P=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",D=s=>{h.push(`/packages/${s.id}/edit`)},N=async s=>{if(confirm(`Are you sure you want to delete package "${s.title||s.name}"?`))try{await f.packages.delete(s.id),await i(n.value.current_page)}catch(t){console.error("Error deleting package:",t),alert("Failed to delete package")}};return A(()=>{i()}),(s,t)=>{const u=T("router-link");return o(),r("div",j,[e("div",z,[t[6]||(t[6]=e("div",null,[e("h1",{class:"page-title"},"ðŸ“¦ Packages Management"),e("p",{class:"page-subtitle"},"Manage pricing plans and packages")],-1)),e("div",J,[m(u,{to:"/packages/create",class:"btn btn-primary"},{default:F(()=>t[5]||(t[5]=[B(" âž• Add New Package ")])),_:1})])]),e("div",Q,[e("div",R,[y(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),placeholder:"Search packages...",class:"search-input",onInput:b},null,544),[[$,v.value]])]),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>g.value=a),class:"filter-select",onChange:t[2]||(t[2]=a=>i(1))},t[7]||(t[7]=[e("option",{value:""},"All Status",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"0"},"Inactive",-1)]),544),[[L,g.value]])]),e("div",W,[p.value?(o(),r("div",Y,t[8]||(t[8]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading packages...",-1)]))):(o(),r("table",q,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Title"),e("th",null,"Price"),e("th",null,"Type"),e("th",null,"Features"),e("th",null,"Status"),e("th",null,"Created At"),e("th",null,"Actions")])],-1)),e("tbody",null,[c.value.length===0?(o(),r("tr",G,t[9]||(t[9]=[e("td",{colspan:"8",class:"empty-cell"}," No packages found ",-1)]))):(o(!0),r(M,{key:1},V(c.value,a=>(o(),r("tr",{key:a.id},[e("td",null,l(a.id),1),e("td",null,[e("div",H,[e("strong",null,l(a.title||a.name),1)])]),e("td",null,[e("strong",O,l(k(a.price)),1)]),e("td",null,[e("span",{class:E(["type-badge",C(a.type)])},l(x(a.type)),3)]),e("td",null,[e("span",X,l(Array.isArray(a.features)?a.features.length:0)+" features ",1)]),e("td",null,[m(K,{status:a.status?"active":"inactive"},null,8,["status"])]),e("td",null,l(P(a.created_at)),1),e("td",null,[e("div",Z,[e("button",{class:"btn-icon",onClick:S=>D(a),title:"Edit"}," âœï¸ ",8,ee),e("button",{class:"btn-icon btn-danger",onClick:S=>N(a),title:"Delete"}," ðŸ—‘ï¸ ",8,te)])])]))),128))])]))]),!p.value&&c.value.length>0&&n.value.last_page>1?(o(),r("div",ae,[e("button",{class:"pagination-btn",disabled:n.value.current_page===1,onClick:t[3]||(t[3]=a=>i(n.value.current_page-1))}," â† Previous ",8,se),e("span",ne," Page "+l(n.value.current_page)+" of "+l(n.value.last_page)+" ("+l(n.value.total)+" total) ",1),e("button",{class:"pagination-btn",disabled:n.value.current_page>=n.value.last_page,onClick:t[4]||(t[4]=a=>i(n.value.current_page+1))}," Next â†’ ",8,le)])):I("",!0)])}}},ce=w(oe,[["__scopeId","data-v-6ee8e0be"]]);export{ce as default};
