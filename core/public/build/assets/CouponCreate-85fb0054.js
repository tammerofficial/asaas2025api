import{_ as w,r as g,x as k,k as V,o as u,c as d,a as s,l as b,J as y,w as S,f as c,g as l,h as i,n as f,t as v,j as _,K as x}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as q,a as M}from"./central-v1-ce42f893.js";const N={class:"coupon-create-page"},O={class:"page-header"},A={class:"form-container"},E={class:"form-grid"},P={class:"form-main"},B={class:"form-group"},I={key:0,class:"error-message"},W={class:"form-group"},F={class:"form-row"},K={class:"form-group"},T={key:0,class:"error-message"},L={class:"form-group"},j=["step","min","max"],z={key:0,class:"error-message"},J={class:"form-help"},R={class:"form-row"},G={class:"form-group"},H={class:"form-group"},Q={class:"form-group"},X={class:"form-sidebar"},Y={class:"form-group"},Z={class:"form-group"},$={class:"form-group"},h={key:0,class:"error-message"},ee={class:"form-actions"},se=["disabled"],te={key:0},oe={key:1},ae={__name:"CouponCreate",setup(le){const C=q(),p=g(!1),t=g({code:"",description:"",discount_type:"percentage",discount:10,usage_limit:0,usage_limit_per_user:1,minimum_amount:0,status:!0,start_date:new Date().toISOString().slice(0,16),expire_date:""}),a=g({}),D=async()=>{var n,e,m,o;a.value={},p.value=!0;try{if(t.value.expire_date&&t.value.start_date){const U=new Date(t.value.start_date);if(new Date(t.value.expire_date)<=U){a.value.expire_date="Expire date must be after start date",p.value=!1;return}}t.value.code||(t.value.code="COUPON"+Date.now().toString().slice(-6)),t.value.code=t.value.code.toUpperCase().replace(/\s+/g,"");const r=await M.coupons.create(t.value);r.data.success?C.push("/coupons"):r.data.errors?a.value=r.data.errors:alert("Failed to create coupon: "+(r.data.message||"Unknown error"))}catch(r){console.error("Error creating coupon:",r),(e=(n=r.response)==null?void 0:n.data)!=null&&e.errors?a.value=r.response.data.errors:alert("Failed to create coupon: "+(((o=(m=r.response)==null?void 0:m.data)==null?void 0:o.message)||"Unknown error"))}finally{p.value=!1}};return k(()=>{const n=new Date;n.setDate(n.getDate()+30),t.value.expire_date=n.toISOString().slice(0,16)}),(n,e)=>{const m=V("router-link");return u(),d("div",N,[s("div",O,[e[11]||(e[11]=s("div",null,[s("h1",{class:"page-title"},"âž• Create New Coupon"),s("p",{class:"page-subtitle"},"Create a new discount coupon")],-1)),b(m,{to:"/coupons",class:"btn btn-secondary"},{default:y(()=>e[10]||(e[10]=[c(" â† Back to Coupons ")])),_:1})]),s("div",A,[s("form",{onSubmit:S(D,["prevent"])},[s("div",E,[s("div",P,[s("div",B,[e[12]||(e[12]=s("label",{for:"code",class:"form-label"},[c(" Coupon Code "),s("span",{class:"required"},"*")],-1)),l(s("input",{type:"text",id:"code","onUpdate:modelValue":e[0]||(e[0]=o=>t.value.code=o),class:f(["form-input",{error:a.value.code}]),placeholder:"COUPON2024",required:""},null,2),[[i,t.value.code]]),a.value.code?(u(),d("span",I,v(a.value.code),1)):_("",!0),e[13]||(e[13]=s("small",{class:"form-help"},"Unique coupon code that customers will use",-1))]),s("div",W,[e[14]||(e[14]=s("label",{for:"description",class:"form-label"},"Description",-1)),l(s("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=o=>t.value.description=o),class:"form-textarea",rows:"4",placeholder:"Coupon description"},null,512),[[i,t.value.description]])]),s("div",F,[s("div",K,[e[16]||(e[16]=s("label",{for:"discount_type",class:"form-label"},[c(" Discount Type "),s("span",{class:"required"},"*")],-1)),l(s("select",{id:"discount_type","onUpdate:modelValue":e[2]||(e[2]=o=>t.value.discount_type=o),class:f(["form-select",{error:a.value.discount_type}]),required:""},e[15]||(e[15]=[s("option",{value:"percentage"},"Percentage (%)",-1),s("option",{value:"fixed"},"Fixed Amount (KWD)",-1)]),2),[[x,t.value.discount_type]]),a.value.discount_type?(u(),d("span",T,v(a.value.discount_type),1)):_("",!0)]),s("div",L,[e[17]||(e[17]=s("label",{for:"discount",class:"form-label"},[c(" Discount Amount "),s("span",{class:"required"},"*")],-1)),l(s("input",{type:"number",id:"discount","onUpdate:modelValue":e[3]||(e[3]=o=>t.value.discount=o),class:f(["form-input",{error:a.value.discount}]),step:t.value.discount_type==="percentage"?"1":"0.001",min:t.value.discount_type==="percentage"?"1":"0.001",max:t.value.discount_type==="percentage"?"100":"999999",placeholder:"10",required:""},null,10,j),[[i,t.value.discount]]),a.value.discount?(u(),d("span",z,v(a.value.discount),1)):_("",!0),s("small",J,v(t.value.discount_type==="percentage"?"Percentage (1-100)":"Amount in KWD"),1)])]),s("div",R,[s("div",G,[e[18]||(e[18]=s("label",{for:"usage_limit",class:"form-label"},"Usage Limit",-1)),l(s("input",{type:"number",id:"usage_limit","onUpdate:modelValue":e[4]||(e[4]=o=>t.value.usage_limit=o),class:"form-input",min:"0",placeholder:"0 = Unlimited"},null,512),[[i,t.value.usage_limit]]),e[19]||(e[19]=s("small",{class:"form-help"},"Maximum number of times this coupon can be used (0 = unlimited)",-1))]),s("div",H,[e[20]||(e[20]=s("label",{for:"usage_limit_per_user",class:"form-label"},"Per User Limit",-1)),l(s("input",{type:"number",id:"usage_limit_per_user","onUpdate:modelValue":e[5]||(e[5]=o=>t.value.usage_limit_per_user=o),class:"form-input",min:"0",placeholder:"1"},null,512),[[i,t.value.usage_limit_per_user]]),e[21]||(e[21]=s("small",{class:"form-help"},"Maximum times a single user can use this coupon",-1))])]),s("div",Q,[e[22]||(e[22]=s("label",{for:"minimum_amount",class:"form-label"},"Minimum Order Amount",-1)),l(s("input",{type:"number",id:"minimum_amount","onUpdate:modelValue":e[6]||(e[6]=o=>t.value.minimum_amount=o),class:"form-input",step:"0.001",min:"0",placeholder:"0.000"},null,512),[[i,t.value.minimum_amount]]),e[23]||(e[23]=s("small",{class:"form-help"},"Minimum order amount required to use this coupon (0 = no minimum)",-1))])]),s("div",X,[s("div",Y,[e[25]||(e[25]=s("label",{for:"status",class:"form-label"},"Status",-1)),l(s("select",{id:"status","onUpdate:modelValue":e[7]||(e[7]=o=>t.value.status=o),class:"form-select"},e[24]||(e[24]=[s("option",{value:!0},"Active",-1),s("option",{value:!1},"Inactive",-1)]),512),[[x,t.value.status]])]),s("div",Z,[e[26]||(e[26]=s("label",{for:"start_date",class:"form-label"},"Start Date",-1)),l(s("input",{type:"datetime-local",id:"start_date","onUpdate:modelValue":e[8]||(e[8]=o=>t.value.start_date=o),class:"form-input"},null,512),[[i,t.value.start_date]]),e[27]||(e[27]=s("small",{class:"form-help"},"When the coupon becomes valid",-1))]),s("div",$,[e[28]||(e[28]=s("label",{for:"expire_date",class:"form-label"},"Expire Date",-1)),l(s("input",{type:"datetime-local",id:"expire_date","onUpdate:modelValue":e[9]||(e[9]=o=>t.value.expire_date=o),class:f(["form-input",{error:a.value.expire_date}])},null,2),[[i,t.value.expire_date]]),a.value.expire_date?(u(),d("span",h,v(a.value.expire_date),1)):_("",!0),e[29]||(e[29]=s("small",{class:"form-help"},"When the coupon expires",-1))])])]),s("div",ee,[s("button",{type:"submit",class:"btn btn-primary",disabled:p.value},[p.value?(u(),d("span",te,"â³ Creating...")):(u(),d("span",oe,"ðŸ’¾ Create Coupon"))],8,se),b(m,{to:"/coupons",class:"btn btn-secondary"},{default:y(()=>e[30]||(e[30]=[c(" Cancel ")])),_:1})])],32)])])}}},ue=w(ae,[["__scopeId","data-v-00035236"]]);export{ue as default};
