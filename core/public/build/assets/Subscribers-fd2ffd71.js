import{_ as k,r as d,x as S,o,c as i,a as e,g as b,h as x,K as A,F as N,b as w,t as n,j as C,l as D}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as V,a as E,S as $}from"./central-v1-ce42f893.js";const T={class:"subscribers-page"},B={class:"filters-bar"},F={class:"search-box"},I={class:"table-container"},M={key:0,class:"loading-overlay"},L={key:1,class:"subscribers-table"},P={key:0},U={class:"user-info"},j={class:"user-name"},K={class:"tenant-badge"},Q={class:"action-buttons"},R=["onClick"],q=["onClick"],z={key:0,class:"pagination"},G=["disabled"],H={class:"pagination-info"},J=["disabled"],O={__name:"Subscribers",setup(W){V();const u=d([]),c=d(!1),p=d(""),v=d(""),s=d({current_page:1,last_page:1,per_page:20,total:0});let _=null;const r=async(l=1)=>{c.value=!0;try{const t={page:l,per_page:s.value.per_page};p.value&&(t.search=p.value),v.value&&(t.status=v.value);const a=await E.subscriptions.subscribers(t);a.data.success&&(u.value=a.data.data||[],a.data.meta&&(s.value=a.data.meta))}catch(t){console.error("Error loading subscribers:",t),u.value=[]}finally{c.value=!1}},m=()=>{clearTimeout(_),_=setTimeout(()=>{r(1)},500)},g=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",h=l=>{console.log("View subscriber:",l)},f=async l=>{if(confirm(`Are you sure you want to delete subscriber "${l.name||l.email}"?`))try{await r(s.value.current_page)}catch(t){console.error("Error deleting subscriber:",t),alert("Failed to delete subscriber")}};return S(()=>{r()}),(l,t)=>(o(),i("div",T,[t[9]||(t[9]=e("div",{class:"page-header"},[e("div",null,[e("h1",{class:"page-title"},"ðŸ“® All Subscribers"),e("p",{class:"page-subtitle"},"Manage all users with active subscriptions")])],-1)),e("div",B,[e("div",F,[b(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),placeholder:"Search subscribers...",class:"search-input",onInput:m},null,544),[[x,p.value]])]),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>v.value=a),class:"filter-select",onChange:t[2]||(t[2]=a=>r(1))},t[5]||(t[5]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"expired"},"Expired",-1)]),544),[[A,v.value]])]),e("div",I,[c.value?(o(),i("div",M,t[6]||(t[6]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading subscribers...",-1)]))):(o(),i("table",L,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Tenant"),e("th",null,"Package"),e("th",null,"Status"),e("th",null,"Expires At"),e("th",null,"Created At"),e("th",null,"Actions")])],-1)),e("tbody",null,[u.value.length===0?(o(),i("tr",P,t[7]||(t[7]=[e("td",{colspan:"9",class:"empty-cell"}," No subscribers found ",-1)]))):(o(!0),i(N,{key:1},w(u.value,a=>(o(),i("tr",{key:a.id},[e("td",null,n(a.id),1),e("td",null,[e("div",U,[e("div",j,n(a.name||a.user_name||"N/A"),1)])]),e("td",null,n(a.email||"N/A"),1),e("td",null,[e("span",K,n(a.tenant_id||"N/A"),1)]),e("td",null,n(a.package_name||a.plan_name||"N/A"),1),e("td",null,[D($,{status:a.status||"active"},null,8,["status"])]),e("td",null,n(g(a.expires_at||a.expire_date)),1),e("td",null,n(g(a.created_at)),1),e("td",null,[e("div",Q,[e("button",{class:"btn-icon",onClick:y=>h(a),title:"View"}," ðŸ‘ï¸ ",8,R),e("button",{class:"btn-icon btn-danger",onClick:y=>f(a),title:"Delete"}," ðŸ—‘ï¸ ",8,q)])])]))),128))])]))]),!c.value&&u.value.length>0&&s.value.last_page>1?(o(),i("div",z,[e("button",{class:"pagination-btn",disabled:s.value.current_page===1,onClick:t[3]||(t[3]=a=>r(s.value.current_page-1))}," â† Previous ",8,G),e("span",H," Page "+n(s.value.current_page)+" of "+n(s.value.last_page)+" ("+n(s.value.total)+" total) ",1),e("button",{class:"pagination-btn",disabled:s.value.current_page>=s.value.last_page,onClick:t[4]||(t[4]=a=>r(s.value.current_page+1))}," Next â†’ ",8,J)])):C("",!0)]))}},Z=k(O,[["__scopeId","data-v-4f25ad41"]]);export{Z as default};
