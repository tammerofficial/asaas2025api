import{_ as x,r as o,x as T,o as n,c as r,a as e,F as A,b as D,t as u,w as k,f as V,g as C,h as $,K as F,j as U,l as B}from"./_plugin-vue_export-helper-25c71bc9.js";import{a as I}from"./central-v1-43971805.js";import{T as L}from"./Toast-c9da9e99.js";const P={class:"roles-page"},q={class:"page-header"},G={class:"page-actions"},j={class:"table-container"},K={key:0,class:"loading-overlay"},W={key:1,class:"roles-table"},z={key:0},H={class:"role-name"},J={class:"action-buttons"},O=["onClick"],Q=["onClick"],X=["onClick"],Y={class:"modal-header"},Z={class:"form-group"},ee={class:"form-group"},se={class:"form-actions"},te=["disabled"],le={__name:"Roles",setup(oe){const i=o([]),p=o(!1),f=o(!1),c=o(!1),v=o(!1),_=o(!1),g=o("success"),y=o(""),h=o(""),a=o({id:null,name:"",guard_name:"web"}),b=async()=>{p.value=!0;try{const t=await I.users.roles();t.data.success&&(i.value=t.data.data||[])}catch(t){console.error("Error loading roles:",t),i.value=[],d("error","Error","Failed to load roles")}finally{p.value=!1}},R=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",M=t=>{a.value={id:t.id,name:t.name,guard_name:t.guard_name||"web"},c.value=!0},E=t=>{alert(`Manage permissions for role: ${t.name}`)},N=async t=>{if(confirm(`Are you sure you want to delete role "${t.name}"?`))try{d("success","Success","Role deleted successfully"),await b()}catch(s){console.error("Error deleting role:",s),d("error","Error","Failed to delete role")}},S=async()=>{v.value=!0;try{a.value.id?d("success","Success","Role updated successfully"):d("success","Success","Role created successfully"),m(),await b()}catch(t){console.error("Error saving role:",t),d("error","Error","Failed to save role")}finally{v.value=!1}},m=()=>{f.value=!1,c.value=!1,a.value={id:null,name:"",guard_name:"web"}},d=(t,s,l)=>{g.value=t,y.value=s,h.value=l,_.value=!0};return T(()=>{b()}),(t,s)=>(n(),r("div",P,[e("div",q,[s[5]||(s[5]=e("div",null,[e("h1",{class:"page-title"},"ðŸŽ­ Roles Management"),e("p",{class:"page-subtitle"},"Manage user roles and permissions")],-1)),e("div",G,[e("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=l=>f.value=!0)}," âž• Add New Role ")])]),e("div",j,[p.value?(n(),r("div",K,s[6]||(s[6]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading roles...",-1)]))):(n(),r("table",W,[s[8]||(s[8]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Guard"),e("th",null,"Users Count"),e("th",null,"Created At"),e("th",null,"Actions")])],-1)),e("tbody",null,[i.value.length===0?(n(),r("tr",z,s[7]||(s[7]=[e("td",{colspan:"6",class:"empty-cell"}," No roles found ",-1)]))):(n(!0),r(A,{key:1},D(i.value,l=>(n(),r("tr",{key:l.id},[e("td",null,u(l.id),1),e("td",null,[e("div",H,[e("strong",null,u(l.name),1)])]),e("td",null,u(l.guard_name||"web"),1),e("td",null,u(l.users_count||0),1),e("td",null,u(R(l.created_at)),1),e("td",null,[e("div",J,[e("button",{class:"btn-icon",onClick:w=>M(l),title:"Edit"}," âœï¸ ",8,O),e("button",{class:"btn-icon",onClick:w=>E(l),title:"Manage Permissions"}," ðŸ” ",8,Q),e("button",{class:"btn-icon btn-danger",onClick:w=>N(l),title:"Delete"}," ðŸ—‘ï¸ ",8,X)])])]))),128))])]))]),f.value||c.value?(n(),r("div",{key:0,class:"modal-overlay",onClick:m},[e("div",{class:"modal-content",onClick:s[3]||(s[3]=k(()=>{},["stop"]))},[e("div",Y,[e("h3",null,u(c.value?"âœï¸ Edit Role":"âž• Add New Role"),1),e("button",{class:"modal-close",onClick:m},"Ã—")]),e("form",{onSubmit:k(S,["prevent"]),class:"modal-form"},[e("div",Z,[s[9]||(s[9]=e("label",{class:"form-label"},[V("Role Name "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=l=>a.value.name=l),class:"form-input",placeholder:"Enter role name",required:""},null,512),[[$,a.value.name]])]),e("div",ee,[s[11]||(s[11]=e("label",{class:"form-label"},"Guard",-1)),C(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>a.value.guard_name=l),class:"form-select"},s[10]||(s[10]=[e("option",{value:"web"},"Web",-1),e("option",{value:"api"},"API",-1)]),512),[[F,a.value.guard_name]])]),e("div",se,[e("button",{type:"submit",class:"btn btn-primary",disabled:v.value},u(v.value?"Saving...":"Save Role"),9,te),e("button",{type:"button",class:"btn btn-secondary",onClick:m}," Cancel ")])],32)])])):U("",!0),B(L,{show:_.value,"onUpdate:show":s[4]||(s[4]=l=>_.value=l),type:g.value,title:y.value,message:h.value},null,8,["show","type","title","message"])]))}},ue=x(le,[["__scopeId","data-v-4e21f244"]]);export{ue as default};
