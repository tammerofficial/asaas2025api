import{_ as w,r,x as F,k as T,o as v,c as y,a as m,l as n,J as g,w as k,f as V}from"./_plugin-vue_export-helper-25c71bc9.js";import{u as E,b as U,a as x}from"./central-v1-43971805.js";import{F as I}from"./FormInput-c38c3cc3.js";import{T as M}from"./Toast-c9da9e99.js";const B={name:"TenantEdit",components:{FormInput:I,Toast:M},setup(){const b=E(),t=U(),l=r(!1),e=r({name:"",domain:"",user_id:null,expire_date:"",data:{}}),u=r(!1),c=r("success"),d=r(""),s=r(""),p=async()=>{l.value=!0;try{const o=await x.tenants.get(t.params.id);o.data.success&&(e.value=o.data.data,e.value.expire_date&&(e.value.expire_date=e.value.expire_date.split(" ")[0]))}catch{f("error","Error","Failed to load tenant")}finally{l.value=!1}},a=async()=>{var o,i;l.value=!0;try{await x.tenants.update(t.params.id,e.value),f("success","Success","Tenant updated successfully"),setTimeout(()=>b.push("/tenants"),1500)}catch(_){f("error","Error",((i=(o=_.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to update tenant")}finally{l.value=!1}},f=(o,i,_)=>{c.value=o,d.value=i,s.value=_,u.value=!0};return F(()=>{p()}),{form:e,loading:l,showToast:u,toastType:c,toastTitle:d,toastMessage:s,submitForm:a}}},N={class:"tenant-form-page"},h={class:"page-header"},C={key:0,class:"loading"},D={class:"form-actions"},q=["disabled"];function R(b,t,l,e,u,c){const d=T("router-link"),s=T("FormInput"),p=T("Toast");return v(),y("div",N,[m("div",h,[t[7]||(t[7]=m("h2",null,"✏️ Edit Tenant",-1)),n(d,{to:"/tenants",class:"btn-secondary"},{default:g(()=>t[6]||(t[6]=[V("← Back to Tenants")])),_:1})]),e.loading?(v(),y("div",C,"Loading...")):(v(),y("form",{key:1,onSubmit:t[4]||(t[4]=k((...a)=>e.submitForm&&e.submitForm(...a),["prevent"])),class:"form-container"},[n(s,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.name=a),label:"Tenant Name",required:""},null,8,["modelValue"]),n(s,{modelValue:e.form.domain,"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.domain=a),label:"Domain",required:""},null,8,["modelValue"]),n(s,{modelValue:e.form.user_id,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.user_id=a),type:"number",label:"User ID"},null,8,["modelValue"]),n(s,{modelValue:e.form.expire_date,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.expire_date=a),type:"date",label:"Expire Date"},null,8,["modelValue"]),m("div",D,[m("button",{type:"submit",class:"btn-primary",disabled:e.loading},"Update Tenant",8,q),n(d,{to:"/tenants",class:"btn-secondary"},{default:g(()=>t[8]||(t[8]=[V("Cancel")])),_:1})])],32)),n(p,{show:e.showToast,"onUpdate:show":t[5]||(t[5]=a=>e.showToast=a),type:e.toastType,title:e.toastTitle,message:e.toastMessage},null,8,["show","type","title","message"])])}const z=w(B,[["render",R],["__scopeId","data-v-77dd91c4"]]);export{z as default};
