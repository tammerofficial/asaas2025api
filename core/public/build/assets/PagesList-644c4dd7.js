import{_ as S,r as c,x as w,k as D,o,c as i,a as t,l as b,J as N,g as m,h as A,K as V,F as $,b as L,t as n,j as T,f as B,n as E}from"./_plugin-vue_export-helper-25c71bc9.js";import{u as F,a as y,S as M}from"./central-v1-43971805.js";const I={class:"pages-list-page"},U={class:"page-header"},j={class:"filters-bar"},z={class:"search-box"},J={class:"table-container"},K={key:0,class:"loading-overlay"},Q={key:1,class:"pages-table"},R={key:0},q={class:"page-title"},G={class:"slug-code"},H={class:"action-buttons"},O=["onClick"],W=["onClick"],X={key:0,class:"pagination"},Y=["disabled"],Z={class:"pagination-info"},tt=["disabled"],et={__name:"PagesList",setup(at){const h=F(),d=c([]),p=c(!1),v=c(""),g=c(""),s=c({current_page:1,last_page:1,per_page:20,total:0});let _=null;const r=async(l=1)=>{p.value=!0;try{const e={page:l,per_page:s.value.per_page};v.value&&(e.search=v.value),g.value!==""&&(e.status=g.value);const u=await y.pages.list(e);u.data.success&&(d.value=u.data.data,u.data.meta&&(s.value=u.data.meta))}catch(e){console.error("Error loading pages:",e),d.value=[]}finally{p.value=!1}},f=()=>{clearTimeout(_),_=setTimeout(()=>{r(1)},500)},k=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",P=l=>{h.push(`/pages/edit/${l.id}`)},C=async l=>{if(confirm(`Are you sure you want to delete "${l.title}"?`))try{await y.pages.delete(l.id),await r(s.value.current_page)}catch(e){console.error("Error deleting page:",e),alert("Failed to delete page")}};return w(()=>{r()}),(l,e)=>{const u=D("router-link");return o(),i("div",I,[t("div",U,[e[6]||(e[6]=t("div",null,[t("h1",{class:"page-title"},"ðŸ“„ All Pages"),t("p",{class:"page-subtitle"},"Manage all website pages")],-1)),b(u,{to:"/pages/create",class:"btn btn-primary"},{default:N(()=>e[5]||(e[5]=[B(" âž• Add New Page ")])),_:1})]),t("div",j,[t("div",z,[m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),placeholder:"Search pages...",class:"search-input",onInput:f},null,544),[[A,v.value]])]),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),class:"filter-select",onChange:e[2]||(e[2]=a=>r(1))},e[7]||(e[7]=[t("option",{value:""},"All Status",-1),t("option",{value:"1"},"Published",-1),t("option",{value:"0"},"Draft",-1)]),544),[[V,g.value]])]),t("div",J,[p.value?(o(),i("div",K,e[8]||(e[8]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading pages...",-1)]))):(o(),i("table",Q,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Slug"),t("th",null,"Status"),t("th",null,"Visibility"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[d.value.length===0?(o(),i("tr",R,e[9]||(e[9]=[t("td",{colspan:"7",class:"empty-cell"}," No pages found ",-1)]))):(o(!0),i($,{key:1},L(d.value,a=>(o(),i("tr",{key:a.id},[t("td",null,n(a.id),1),t("td",null,[t("div",q,[t("strong",null,n(a.title),1)])]),t("td",null,[t("code",G,n(a.slug),1)]),t("td",null,[b(M,{status:a.status?"published":"draft"},null,8,["status"])]),t("td",null,[t("span",{class:E(["visibility-badge",a.visibility?"public":"private"])},n(a.visibility?"Public":"Private"),3)]),t("td",null,n(k(a.created_at)),1),t("td",null,[t("div",H,[t("button",{class:"btn-icon",onClick:x=>P(a),title:"Edit"}," âœï¸ ",8,O),t("button",{class:"btn-icon btn-danger",onClick:x=>C(a),title:"Delete"}," ðŸ—‘ï¸ ",8,W)])])]))),128))])]))]),!p.value&&d.value.length>0&&s.value.last_page>1?(o(),i("div",X,[t("button",{class:"pagination-btn",disabled:s.value.current_page===1,onClick:e[3]||(e[3]=a=>r(s.value.current_page-1))}," â† Previous ",8,Y),t("span",Z," Page "+n(s.value.current_page)+" of "+n(s.value.last_page)+" ("+n(s.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:s.value.current_page>=s.value.last_page,onClick:e[4]||(e[4]=a=>r(s.value.current_page+1))}," Next â†’ ",8,tt)])):T("",!0)])}}},nt=S(et,[["__scopeId","data-v-060d2670"]]);export{nt as default};
