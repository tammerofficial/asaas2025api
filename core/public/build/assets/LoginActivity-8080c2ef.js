import{_ as x,r as v,x as I,o as i,c as u,a as t,g as f,h as P,K as w,F,b as M,t as l,j as N,f as c,l as T,w as $}from"./_plugin-vue_export-helper-80b3f0a9.js";import{S as D,a as B}from"./central-v1-ce42f893.js";const E={class:"login-activity-page"},R={class:"filters-bar"},j={class:"search-box"},K={class:"table-container"},Q={key:0,class:"loading-overlay"},q={key:1,class:"activity-table"},z={key:0},G={class:"user-name"},H={class:"type-badge"},J={class:"ip-address"},O={class:"user-agent"},W={class:"action-buttons"},X=["onClick"],Y={key:0,class:"pagination"},Z=["disabled"],tt={class:"pagination-info"},et=["disabled"],st={class:"modal-body"},lt={class:"detail-item"},at={class:"detail-item"},nt={class:"detail-item"},ot={class:"detail-item"},it={class:"detail-item"},ut={class:"detail-item"},dt={class:"detail-item"},rt={class:"user-agent-full"},vt={class:"detail-item"},ct={class:"detail-item"},pt={__name:"LoginActivity",setup(gt){const p=v([]),g=v(!1),m=v(""),_=v(""),y=v(""),a=v(null),o=v({current_page:1,last_page:1,per_page:20,total:0});let A=null;const d=async(n=1)=>{g.value=!0;try{const e={page:n,per_page:o.value.per_page};m.value&&(e.search=m.value),_.value&&(e.status=_.value),y.value&&(e.type=y.value);const r=await B.users.list(e);r.data.success&&(p.value=r.data.data||[],r.data.meta&&(o.value=r.data.meta))}catch(e){console.error("Error loading login activity:",e),p.value=[]}finally{g.value=!1}},L=()=>{clearTimeout(A),A=setTimeout(()=>{d(1)},500)},k=n=>n?new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",V=(n,e)=>n?n.length<=e?n:n.substring(0,e)+"...":"-",U=n=>{a.value=n},b=()=>{a.value=null};return I(()=>{d()}),(n,e)=>{var r,h;return i(),u("div",E,[t("div",{class:"page-header"},[e[8]||(e[8]=t("div",null,[t("h1",{class:"page-title"},"üîê Login Activity"),t("p",{class:"page-subtitle"},"View all login attempts and activities")],-1)),t("div",{class:"page-actions"},[t("button",{class:"btn btn-secondary",onClick:d}," üîÑ Refresh ")])]),t("div",R,[t("div",j,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),placeholder:"Search by user, email, IP...",class:"search-input",onInput:L},null,544),[[P,m.value]])]),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),class:"filter-select",onChange:e[2]||(e[2]=s=>d(1))},e[9]||(e[9]=[t("option",{value:""},"All Status",-1),t("option",{value:"success"},"Success",-1),t("option",{value:"failed"},"Failed",-1)]),544),[[w,_.value]]),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),class:"filter-select",onChange:e[4]||(e[4]=s=>d(1))},e[10]||(e[10]=[t("option",{value:""},"All Types",-1),t("option",{value:"login"},"Login",-1),t("option",{value:"logout"},"Logout",-1),t("option",{value:"password_reset"},"Password Reset",-1)]),544),[[w,y.value]])]),t("div",K,[g.value?(i(),u("div",Q,e[11]||(e[11]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading login activity...",-1)]))):(i(),u("table",q,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"User"),t("th",null,"Email"),t("th",null,"Type"),t("th",null,"Status"),t("th",null,"IP Address"),t("th",null,"User Agent"),t("th",null,"Date"),t("th",null,"Actions")])],-1)),t("tbody",null,[p.value.length===0?(i(),u("tr",z,e[12]||(e[12]=[t("td",{colspan:"9",class:"empty-cell"}," No login activity found ",-1)]))):(i(!0),u(F,{key:1},M(p.value,s=>{var C,S;return i(),u("tr",{key:s.id},[t("td",null,l(s.id),1),t("td",null,[t("div",G,[t("strong",null,l(((C=s.user)==null?void 0:C.name)||s.username||"N/A"),1)])]),t("td",null,l(((S=s.user)==null?void 0:S.email)||s.email||"-"),1),t("td",null,[t("span",H,l(s.type||"login"),1)]),t("td",null,[T(D,{status:s.status||"success"},null,8,["status"])]),t("td",null,[t("span",J,l(s.ip_address||"-"),1)]),t("td",null,[t("div",O,l(V(s.user_agent||"-",50)),1)]),t("td",null,l(k(s.created_at)),1),t("td",null,[t("div",W,[t("button",{class:"btn-icon",onClick:mt=>U(s),title:"View Details"}," üëÅÔ∏è ",8,X)])])])}),128))])]))]),!g.value&&p.value.length>0&&o.value.last_page>1?(i(),u("div",Y,[t("button",{class:"pagination-btn",disabled:o.value.current_page===1,onClick:e[5]||(e[5]=s=>d(o.value.current_page-1))}," ‚Üê Previous ",8,Z),t("span",tt," Page "+l(o.value.current_page)+" of "+l(o.value.last_page)+" ("+l(o.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:o.value.current_page>=o.value.last_page,onClick:e[6]||(e[6]=s=>d(o.value.current_page+1))}," Next ‚Üí ",8,et)])):N("",!0),a.value?(i(),u("div",{key:1,class:"modal-overlay",onClick:b},[t("div",{class:"modal-content",onClick:e[7]||(e[7]=$(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[14]||(e[14]=t("h3",null,"üîê Activity Details",-1)),t("button",{class:"modal-close",onClick:b},"√ó")]),t("div",st,[t("div",lt,[e[15]||(e[15]=t("strong",null,"ID:",-1)),c(" "+l(a.value.id),1)]),t("div",at,[e[16]||(e[16]=t("strong",null,"User:",-1)),c(" "+l(((r=a.value.user)==null?void 0:r.name)||a.value.username||"N/A"),1)]),t("div",nt,[e[17]||(e[17]=t("strong",null,"Email:",-1)),c(" "+l(((h=a.value.user)==null?void 0:h.email)||a.value.email||"-"),1)]),t("div",ot,[e[18]||(e[18]=t("strong",null,"Type:",-1)),c(" "+l(a.value.type||"login"),1)]),t("div",it,[e[19]||(e[19]=t("strong",null,"Status:",-1)),T(D,{status:a.value.status||"success"},null,8,["status"])]),t("div",ut,[e[20]||(e[20]=t("strong",null,"IP Address:",-1)),c(" "+l(a.value.ip_address||"-"),1)]),t("div",dt,[e[21]||(e[21]=t("strong",null,"User Agent:",-1)),t("div",rt,l(a.value.user_agent||"-"),1)]),t("div",vt,[e[22]||(e[22]=t("strong",null,"Location:",-1)),c(" "+l(a.value.location||"N/A"),1)]),t("div",ct,[e[23]||(e[23]=t("strong",null,"Created At:",-1)),c(" "+l(k(a.value.created_at)),1)])]),t("div",{class:"modal-footer"},[t("button",{class:"btn btn-secondary",onClick:b},"Close")])])])):N("",!0)])}}},bt=x(pt,[["__scopeId","data-v-a78700ca"]]);export{bt as default};
