import{_ as P,r,x,k as v,o as y,c as k,a as t,l as d,J as _,w as E,g as T,K as w,f as V}from"./_plugin-vue_export-helper-335f4554.js";import{u as M,b as U,a as F}from"./central-v1-c4e0d34f.js";import{F as I}from"./FormInput-3bcd1977.js";import{T as B}from"./Toast-2332f712.js";const S={name:"PackageEdit",components:{FormInput:I,Toast:B},setup(){const b=M(),e=U(),l=r(!1),o=r({title:"",price:"",type:0,status:1}),m=r(!1),c=r("success"),n=r(""),i=r(""),p=async()=>{l.value=!0;try{const a=await F.plans.get(e.params.id);a.data.success&&(o.value=a.data.data)}catch{f("error","Error","Failed to load package")}finally{l.value=!1}},s=async()=>{var a,u;l.value=!0;try{await F.plans.update(e.params.id,o.value),f("success","Success","Package updated successfully"),setTimeout(()=>b.push("/packages"),1500)}catch(g){f("error","Error",((u=(a=g.response)==null?void 0:a.data)==null?void 0:u.message)||"Failed to update package")}finally{l.value=!1}},f=(a,u,g)=>{c.value=a,n.value=u,i.value=g,m.value=!0};return x(()=>{p()}),{form:o,loading:l,showToast:m,toastType:c,toastTitle:n,toastMessage:i,submitForm:s}}},C={class:"package-form-page"},N={class:"page-header"},q={key:0,class:"loading"},R={class:"form-group"},A={class:"form-group"},D={class:"form-actions"},J=["disabled"];function K(b,e,l,o,m,c){const n=v("router-link"),i=v("FormInput"),p=v("Toast");return y(),k("div",C,[t("div",N,[e[7]||(e[7]=t("h2",null,"✏️ Edit Package",-1)),d(n,{to:"/packages",class:"btn-secondary"},{default:_(()=>e[6]||(e[6]=[V("← Back to Packages")])),_:1})]),o.loading?(y(),k("div",q,"Loading...")):(y(),k("form",{key:1,onSubmit:e[4]||(e[4]=E((...s)=>o.submitForm&&o.submitForm(...s),["prevent"])),class:"form-container"},[d(i,{modelValue:o.form.title,"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.title=s),label:"Title",required:""},null,8,["modelValue"]),d(i,{modelValue:o.form.price,"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.price=s),type:"number",label:"Price",required:""},null,8,["modelValue"]),t("div",R,[e[9]||(e[9]=t("label",null,"Type",-1)),T(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.type=s),class:"form-select"},e[8]||(e[8]=[t("option",{value:"0"},"Monthly",-1),t("option",{value:"1"},"Yearly",-1)]),512),[[w,o.form.type]])]),t("div",A,[e[11]||(e[11]=t("label",null,"Status",-1)),T(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.status=s),class:"form-select"},e[10]||(e[10]=[t("option",{value:"1"},"Active",-1),t("option",{value:"0"},"Inactive",-1)]),512),[[w,o.form.status]])]),t("div",D,[t("button",{type:"submit",class:"btn-primary",disabled:o.loading},"Update Package",8,J),d(n,{to:"/packages",class:"btn-secondary"},{default:_(()=>e[12]||(e[12]=[V("Cancel")])),_:1})])],32)),d(p,{show:o.showToast,"onUpdate:show":e[5]||(e[5]=s=>o.showToast=s),type:o.toastType,title:o.toastTitle,message:o.toastMessage},null,8,["show","type","title","message"])])}const G=P(S,[["render",K],["__scopeId","data-v-22e27ee4"]]);export{G as default};
