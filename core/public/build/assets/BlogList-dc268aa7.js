import{_ as S,r as c,x as V,k as D,o as n,c as i,a as t,l as h,J as N,g as f,h as $,K as A,F as L,b as T,t as o,j as E,f as F}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as M,a as m,S as I}from"./central-v1-ce42f893.js";const P={class:"blogs-page"},U={class:"page-header"},j={class:"page-actions"},J={class:"filters-bar"},K={class:"search-box"},Q={class:"table-container"},R={key:0,class:"loading-overlay"},q={key:1,class:"blogs-table"},z={key:0},G={class:"blog-title"},H={class:"category-badge"},O={class:"action-buttons"},W=["onClick"],X=["onClick"],Y=["onClick"],Z={key:0,class:"pagination"},tt=["disabled"],et={class:"pagination-info"},at=["disabled"],lt={__name:"BlogList",setup(st){const y=M(),d=c([]),p=c(!1),g=c(""),v=c(""),l=c({current_page:1,last_page:1,per_page:20,total:0});let _=null;const r=async(s=1)=>{p.value=!0;try{const e={page:s,per_page:l.value.per_page};g.value&&(e.search=g.value),v.value&&(e.status=v.value);const u=await m.blog.list(e);u.data.success&&(d.value=u.data.data,u.data.meta&&(l.value=u.data.meta))}catch(e){console.error("Error loading blogs:",e),d.value=[]}finally{p.value=!1}},k=()=>{clearTimeout(_),_=setTimeout(()=>{r(1)},500)},C=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",w=s=>{alert(`View blog: ${s.title}`)},B=s=>{y.push(`/blog/edit/${s.id}`)},x=async s=>{if(confirm(`Are you sure you want to delete "${s.title}"?`))try{await m.blog.delete(s.id),await r(l.value.current_page)}catch(e){console.error("Error deleting blog:",e),alert("Failed to delete blog")}};return V(()=>{r()}),(s,e)=>{const u=D("router-link");return n(),i("div",P,[t("div",U,[e[5]||(e[5]=t("div",null,[t("h1",{class:"page-title"},"ðŸ“ All Blogs"),t("p",{class:"page-subtitle"},"Manage all blog posts")],-1)),t("div",j,[h(u,{to:"/blog/create",class:"btn btn-primary"},{default:N(()=>e[4]||(e[4]=[F(" âž• Add New Blog ")])),_:1})])]),t("div",J,[t("div",K,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),placeholder:"Search blogs...",class:"search-input",onInput:k},null,544),[[$,g.value]])]),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),class:"filter-select",onChange:r},e[6]||(e[6]=[t("option",{value:""},"All Status",-1),t("option",{value:"publish"},"Published",-1),t("option",{value:"draft"},"Draft",-1)]),544),[[A,v.value]])]),t("div",Q,[p.value?(n(),i("div",R,e[7]||(e[7]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading blogs...",-1)]))):(n(),i("table",q,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Category"),t("th",null,"Status"),t("th",null,"Views"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[d.value.length===0?(n(),i("tr",z,e[8]||(e[8]=[t("td",{colspan:"7",class:"empty-cell"}," No blogs found ",-1)]))):(n(!0),i(L,{key:1},T(d.value,a=>(n(),i("tr",{key:a.id},[t("td",null,o(a.id),1),t("td",null,[t("div",G,[t("strong",null,o(a.title),1)])]),t("td",null,[t("span",H,o(a.category),1)]),t("td",null,[h(I,{status:a.status||"draft"},null,8,["status"])]),t("td",null,o(a.views||0),1),t("td",null,o(C(a.created_at)),1),t("td",null,[t("div",O,[t("button",{class:"btn-icon",onClick:b=>w(a),title:"View"}," ðŸ‘ï¸ ",8,W),t("button",{class:"btn-icon",onClick:b=>B(a),title:"Edit"}," âœï¸ ",8,X),t("button",{class:"btn-icon btn-danger",onClick:b=>x(a),title:"Delete"}," ðŸ—‘ï¸ ",8,Y)])])]))),128))])]))]),!p.value&&d.value.length>0&&l.value.last_page>1?(n(),i("div",Z,[t("button",{class:"pagination-btn",disabled:l.value.current_page===1,onClick:e[2]||(e[2]=a=>r(l.value.current_page-1))}," â† Previous ",8,tt),t("span",et," Page "+o(l.value.current_page)+" of "+o(l.value.last_page)+" ("+o(l.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:l.value.current_page>=l.value.last_page,onClick:e[3]||(e[3]=a=>r(l.value.current_page+1))}," Next â†’ ",8,at)])):E("",!0)])}}},it=S(lt,[["__scopeId","data-v-d291a356"]]);export{it as default};
