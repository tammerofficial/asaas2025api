import{_ as V,r as c,x as D,k as U,o as i,c as l,a as t,l as k,J as g,w as q,f as m,g as v,h as b,n as _,t as p,j as f,K as w,F as M,b as N}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as S,a as C}from"./central-v1-ce42f893.js";const B={class:"ticket-create-page"},E={class:"page-header"},F={class:"form-container"},L={class:"form-grid"},j={class:"form-main"},z={class:"form-group"},H={key:0,class:"error-message"},I={class:"form-group"},J={key:0,class:"error-message"},K={class:"form-sidebar"},P={class:"form-group"},R={key:0,class:"error-message"},A={class:"form-group"},G=["value"],O={key:0,class:"error-message"},Q={class:"form-actions"},W=["disabled"],X={key:0},Y={key:1},Z={__name:"TicketCreate",setup($){const x=S(),u=c(!1),o=c({title:"",description:"",priority:"medium",department_id:""}),s=c({}),y=c([]),h=async()=>{try{const n=await C.support.departments();n.data.success&&(y.value=n.data.data||[])}catch(n){console.error("Error loading departments:",n)}},T=async()=>{var n,e,d,r;s.value={},u.value=!0;try{const a=await C.support.create(o.value);a.data.success?x.push("/support"):a.data.errors?s.value=a.data.errors:alert("Failed to create ticket: "+(a.data.message||"Unknown error"))}catch(a){console.error("Error creating ticket:",a),(e=(n=a.response)==null?void 0:n.data)!=null&&e.errors?s.value=a.response.data.errors:alert("Failed to create ticket: "+(((r=(d=a.response)==null?void 0:d.data)==null?void 0:r.message)||"Unknown error"))}finally{u.value=!1}};return D(()=>{h()}),(n,e)=>{const d=U("router-link");return i(),l("div",B,[t("div",E,[e[5]||(e[5]=t("div",null,[t("h1",{class:"page-title"},"âž• Create New Ticket"),t("p",{class:"page-subtitle"},"Create a new support ticket")],-1)),k(d,{to:"/support",class:"btn btn-secondary"},{default:g(()=>e[4]||(e[4]=[m(" â† Back to Tickets ")])),_:1})]),t("div",F,[t("form",{onSubmit:q(T,["prevent"])},[t("div",L,[t("div",j,[t("div",z,[e[6]||(e[6]=t("label",{for:"title",class:"form-label"},[m(" Title "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=r=>o.value.title=r),class:_(["form-input",{error:s.value.title}]),placeholder:"Enter ticket title",required:""},null,2),[[b,o.value.title]]),s.value.title?(i(),l("span",H,p(s.value.title),1)):f("",!0)]),t("div",I,[e[7]||(e[7]=t("label",{for:"description",class:"form-label"},[m(" Description "),t("span",{class:"required"},"*")],-1)),v(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=r=>o.value.description=r),class:_(["form-textarea",{error:s.value.description}]),rows:"8",placeholder:"Describe your issue or request...",required:""},null,2),[[b,o.value.description]]),s.value.description?(i(),l("span",J,p(s.value.description),1)):f("",!0)])]),t("div",K,[t("div",P,[e[9]||(e[9]=t("label",{for:"priority",class:"form-label"},"Priority",-1)),v(t("select",{id:"priority","onUpdate:modelValue":e[2]||(e[2]=r=>o.value.priority=r),class:_(["form-select",{error:s.value.priority}])},e[8]||(e[8]=[t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1)]),2),[[w,o.value.priority]]),s.value.priority?(i(),l("span",R,p(s.value.priority),1)):f("",!0)]),t("div",A,[e[11]||(e[11]=t("label",{for:"department_id",class:"form-label"},"Department",-1)),v(t("select",{id:"department_id","onUpdate:modelValue":e[3]||(e[3]=r=>o.value.department_id=r),class:_(["form-select",{error:s.value.department_id}])},[e[10]||(e[10]=t("option",{value:""},"Select Department",-1)),(i(!0),l(M,null,N(y.value,r=>(i(),l("option",{key:r.id,value:r.id},p(r.name),9,G))),128))],2),[[w,o.value.department_id]]),s.value.department_id?(i(),l("span",O,p(s.value.department_id),1)):f("",!0)])])]),t("div",Q,[t("button",{type:"submit",class:"btn btn-primary",disabled:u.value},[u.value?(i(),l("span",X,"â³ Creating...")):(i(),l("span",Y,"ðŸ“¤ Create Ticket"))],8,W),k(d,{to:"/support",class:"btn btn-secondary"},{default:g(()=>e[12]||(e[12]=[m(" Cancel ")])),_:1})])],32)])])}}},se=V(Z,[["__scopeId","data-v-87d10d96"]]);export{se as default};
