import{_ as B,r as d,x as I,o as r,c as i,a as e,g as m,h,K as A,F as L,b as T,t as u,j as S,w as V,f as P,n as $,l as q}from"./_plugin-vue_export-helper-25c71bc9.js";import{a as w,S as j}from"./central-v1-43971805.js";const z={class:"categories-page"},K={class:"page-header"},Q={class:"page-actions"},G={class:"filters-bar"},H={class:"search-box"},J={class:"table-container"},O={key:0,class:"loading-overlay"},R={key:1,class:"categories-table"},W={key:0},X={class:"category-name"},Y={class:"slug-code"},Z={class:"description-text"},ee={class:"action-buttons"},te=["onClick"],ae=["onClick"],se={key:0,class:"pagination"},le=["disabled"],oe={class:"pagination-info"},ne=["disabled"],re={class:"modal-header"},ie={class:"form-group"},ue={key:0,class:"error-message"},de={class:"form-group"},ce={class:"form-group"},ve={class:"form-group"},pe={class:"modal-actions"},ge=["disabled"],me={key:0},fe={key:1},be={__name:"Categories",setup(_e){const f=d([]),c=d(!1),b=d(""),_=d(""),y=d(!1),g=d(null),o=d({current_page:1,last_page:1,per_page:20,total:0}),l=d({name:"",slug:"",description:"",status:!0}),v=d({});let x=null;const p=async(s=1)=>{c.value=!0;try{const t={page:s,per_page:o.value.per_page};b.value&&(t.search=b.value),_.value!==""&&(t.status=_.value);const a=await w.blog.categories(t);a.data.success&&(f.value=a.data.data||[],a.data.meta&&(o.value=a.data.meta))}catch(t){console.error("Error loading categories:",t),f.value=[]}finally{c.value=!1}},D=()=>{clearTimeout(x),x=setTimeout(()=>{p(1)},500)},N=s=>s.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),U=s=>{g.value=s,l.value={name:s.name||"",slug:s.slug||"",description:s.description||"",status:s.status!==void 0?s.status:!0},y.value=!0},M=async s=>{if(confirm(`Are you sure you want to delete category "${s.name}"?`))try{await w.blog.delete(`categories/${s.id}`),await p(o.value.current_page)}catch(t){console.error("Error deleting category:",t),alert("Failed to delete category")}},E=async()=>{var s,t,a,k;v.value={},c.value=!0;try{!l.value.slug&&l.value.name&&(l.value.slug=N(l.value.name));let n;g.value?n=await w.blog.update(`categories/${g.value.id}`,l.value):n=await w.blog.create({...l.value,type:"category"}),n.data.success?(C(),await p(o.value.current_page)):n.data.errors?v.value=n.data.errors:alert("Failed to save category: "+(n.data.message||"Unknown error"))}catch(n){console.error("Error saving category:",n),(t=(s=n.response)==null?void 0:s.data)!=null&&t.errors?v.value=n.response.data.errors:alert("Failed to save category: "+(((k=(a=n.response)==null?void 0:a.data)==null?void 0:k.message)||"Unknown error"))}finally{c.value=!1}},C=()=>{y.value=!1,g.value=null,l.value={name:"",slug:"",description:"",status:!0},v.value={}},F=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return I(()=>{p()}),(s,t)=>(r(),i("div",z,[e("div",K,[t[11]||(t[11]=e("div",null,[e("h1",{class:"page-title"},"üìÇ Blog Categories"),e("p",{class:"page-subtitle"},"Manage blog categories")],-1)),e("div",Q,[e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=a=>y.value=!0)}," ‚ûï Add Category ")])]),e("div",G,[e("div",H,[m(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>b.value=a),placeholder:"Search categories...",class:"search-input",onInput:D},null,544),[[h,b.value]])]),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>_.value=a),class:"filter-select",onChange:t[3]||(t[3]=a=>p(1))},t[12]||(t[12]=[e("option",{value:""},"All Status",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"0"},"Inactive",-1)]),544),[[A,_.value]])]),e("div",J,[c.value?(r(),i("div",O,t[13]||(t[13]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading categories...",-1)]))):(r(),i("table",R,[t[15]||(t[15]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Slug"),e("th",null,"Description"),e("th",null,"Posts"),e("th",null,"Status"),e("th",null,"Created At"),e("th",null,"Actions")])],-1)),e("tbody",null,[f.value.length===0?(r(),i("tr",W,t[14]||(t[14]=[e("td",{colspan:"8",class:"empty-cell"}," No categories found ",-1)]))):(r(!0),i(L,{key:1},T(f.value,a=>(r(),i("tr",{key:a.id},[e("td",null,u(a.id),1),e("td",null,[e("div",X,[e("strong",null,u(a.name),1)])]),e("td",null,[e("code",Y,u(a.slug),1)]),e("td",null,[e("span",Z,u(a.description||"-"),1)]),e("td",null,u(a.posts_count||0),1),e("td",null,[q(j,{status:a.status?"active":"inactive"},null,8,["status"])]),e("td",null,u(F(a.created_at)),1),e("td",null,[e("div",ee,[e("button",{class:"btn-icon",onClick:k=>U(a),title:"Edit"}," ‚úèÔ∏è ",8,te),e("button",{class:"btn-icon btn-danger",onClick:k=>M(a),title:"Delete"}," üóëÔ∏è ",8,ae)])])]))),128))])]))]),!c.value&&f.value.length>0&&o.value.last_page>1?(r(),i("div",se,[e("button",{class:"pagination-btn",disabled:o.value.current_page===1,onClick:t[4]||(t[4]=a=>p(o.value.current_page-1))}," ‚Üê Previous ",8,le),e("span",oe," Page "+u(o.value.current_page)+" of "+u(o.value.last_page)+" ("+u(o.value.total)+" total) ",1),e("button",{class:"pagination-btn",disabled:o.value.current_page>=o.value.last_page,onClick:t[5]||(t[5]=a=>p(o.value.current_page+1))}," Next ‚Üí ",8,ne)])):S("",!0),y.value||g.value?(r(),i("div",{key:1,class:"modal-overlay",onClick:C},[e("div",{class:"modal-content",onClick:t[10]||(t[10]=V(()=>{},["stop"]))},[e("div",re,[e("h3",null,u(g.value?"‚úèÔ∏è Edit Category":"‚ûï Add Category"),1),e("button",{class:"modal-close",onClick:C},"‚úï")]),e("form",{onSubmit:V(E,["prevent"]),class:"modal-form"},[e("div",ie,[t[16]||(t[16]=e("label",{for:"name",class:"form-label"},[P(" Name "),e("span",{class:"required"},"*")],-1)),m(e("input",{type:"text",id:"name","onUpdate:modelValue":t[6]||(t[6]=a=>l.value.name=a),class:$(["form-input",{error:v.value.name}]),placeholder:"Category name",required:""},null,2),[[h,l.value.name]]),v.value.name?(r(),i("span",ue,u(v.value.name),1)):S("",!0)]),e("div",de,[t[17]||(t[17]=e("label",{for:"slug",class:"form-label"},"Slug",-1)),m(e("input",{type:"text",id:"slug","onUpdate:modelValue":t[7]||(t[7]=a=>l.value.slug=a),class:$(["form-input",{error:v.value.slug}]),placeholder:"category-slug (auto-generated)"},null,2),[[h,l.value.slug]]),t[18]||(t[18]=e("small",{class:"form-help"},"Leave empty to auto-generate from name",-1))]),e("div",ce,[t[19]||(t[19]=e("label",{for:"description",class:"form-label"},"Description",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":t[8]||(t[8]=a=>l.value.description=a),class:"form-textarea",rows:"4",placeholder:"Category description"},null,512),[[h,l.value.description]])]),e("div",ve,[t[21]||(t[21]=e("label",{for:"status",class:"form-label"},"Status",-1)),m(e("select",{id:"status","onUpdate:modelValue":t[9]||(t[9]=a=>l.value.status=a),class:"form-select"},t[20]||(t[20]=[e("option",{value:!0},"Active",-1),e("option",{value:!1},"Inactive",-1)]),512),[[A,l.value.status]])]),e("div",pe,[e("button",{type:"submit",class:"btn btn-primary",disabled:c.value},[c.value?(r(),i("span",me,"‚è≥ Saving...")):(r(),i("span",fe,"üíæ Save"))],8,ge),e("button",{type:"button",class:"btn btn-secondary",onClick:C}," Cancel ")])],32)])])):S("",!0)]))}},ke=B(be,[["__scopeId","data-v-b18180d2"]]);export{ke as default};
