import{_ as k,r as m,x as A,k as y,o as w,c as b,a,l as r,J as _,w as F,g as E,K as U,f as V}from"./_plugin-vue_export-helper-25c71bc9.js";import{u as x,b as M,a as T}from"./central-v1-43971805.js";import{F as I}from"./FormInput-c38c3cc3.js";import{T as B}from"./Toast-c9da9e99.js";const N={name:"AdminEdit",components:{FormInput:I,Toast:B},setup(){const g=x(),e=M(),d=m(!1),o=m({name:"",email:"",username:"",password:"",status:1}),p=m(!1),f=m("success"),i=m(""),l=m(""),c=async()=>{d.value=!0;try{const t=await T.admins.get(e.params.id);t.data.success&&(o.value={...t.data.data,password:""})}catch{v("error","Error","Failed to load admin")}finally{d.value=!1}},s=async()=>{var t,u;d.value=!0;try{const n={...o.value};n.password||delete n.password,await T.admins.update(e.params.id,n),v("success","Success","Admin updated successfully"),setTimeout(()=>g.push("/admins"),1500)}catch(n){v("error","Error",((u=(t=n.response)==null?void 0:t.data)==null?void 0:u.message)||"Failed to update admin")}finally{d.value=!1}},v=(t,u,n)=>{f.value=t,i.value=u,l.value=n,p.value=!0};return A(()=>{c()}),{form:o,loading:d,showToast:p,toastType:f,toastTitle:i,toastMessage:l,submitForm:s}}},S={class:"admin-form-page"},q={class:"page-header"},C={key:0,class:"loading"},R={class:"form-group"},D={class:"form-actions"},J=["disabled"];function K(g,e,d,o,p,f){const i=y("router-link"),l=y("FormInput"),c=y("Toast");return w(),b("div",S,[a("div",q,[e[8]||(e[8]=a("h2",null,"✏️ Edit Admin",-1)),r(i,{to:"/admins",class:"btn-secondary"},{default:_(()=>e[7]||(e[7]=[V("← Back to Admins")])),_:1})]),o.loading?(w(),b("div",C,"Loading...")):(w(),b("form",{key:1,onSubmit:e[5]||(e[5]=F((...s)=>o.submitForm&&o.submitForm(...s),["prevent"])),class:"form-container"},[r(l,{modelValue:o.form.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.name=s),label:"Name",required:""},null,8,["modelValue"]),r(l,{modelValue:o.form.email,"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.email=s),type:"email",label:"Email",required:""},null,8,["modelValue"]),r(l,{modelValue:o.form.username,"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.username=s),label:"Username",required:""},null,8,["modelValue"]),r(l,{modelValue:o.form.password,"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.password=s),type:"password",label:"Password (leave empty to keep current)"},null,8,["modelValue"]),a("div",R,[e[10]||(e[10]=a("label",null,"Status",-1)),E(a("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.status=s),class:"form-select"},e[9]||(e[9]=[a("option",{value:"1"},"Active",-1),a("option",{value:"0"},"Inactive",-1)]),512),[[U,o.form.status]])]),a("div",D,[a("button",{type:"submit",class:"btn-primary",disabled:o.loading},"Update Admin",8,J),r(i,{to:"/admins",class:"btn-secondary"},{default:_(()=>e[11]||(e[11]=[V("Cancel")])),_:1})])],32)),r(c,{show:o.showToast,"onUpdate:show":e[6]||(e[6]=s=>o.showToast=s),type:o.toastType,title:o.toastTitle,message:o.toastMessage},null,8,["show","type","title","message"])])}const G=k(N,[["render",K],["__scopeId","data-v-a18ee90e"]]);export{G as default};
