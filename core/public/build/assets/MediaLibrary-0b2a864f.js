import{_ as M,r as d,p as T,x as k,k as F,o as l,c as r,a as o,f as x,g as U,h as L,F as S,b as B,j as C,l as D,t as w}from"./_plugin-vue_export-helper-25c71bc9.js";import{a as p}from"./central-v1-43971805.js";import{T as E}from"./Toast-c9da9e99.js";const N={name:"MediaLibrary",components:{Toast:E},setup(){const n=d(!1),t=d([]),u=d(""),a=d(!1),h=d("success"),y=d(""),m=d(""),e=async()=>{n.value=!0;try{const s=await p.media.list({search:u.value});s.data.success&&(t.value=s.data.data.data||s.data.data||[])}catch(s){console.error("Error fetching media:",s),c("error","Error","Failed to load media")}finally{n.value=!1}},f=async s=>{const i=s.target.files;if(i.length){n.value=!0;try{for(const _ of i){const g=new FormData;g.append("file",_),await p.media.upload(g)}c("success","Success",`${i.length} file(s) uploaded successfully`),e()}catch{c("error","Error","Failed to upload files")}finally{n.value=!1}}},v=async s=>{if(confirm("Are you sure you want to delete this media file?"))try{await p.media.delete(s),c("success","Success","Media deleted successfully"),e()}catch{c("error","Error","Failed to delete media")}},b=s=>{if(!s)return"-";const i=s/1024;return i<1024?`${i.toFixed(2)} KB`:`${(i/1024).toFixed(2)} MB`},c=(s,i,_)=>{h.value=s,y.value=i,m.value=_,a.value=!0};return T(u,()=>{e()}),k(()=>{e()}),{loading:n,media:t,searchQuery:u,showToast:a,toastType:h,toastTitle:y,toastMessage:m,handleFileUpload:f,deleteMedia:v,formatSize:b}}},V={class:"media-library-page"},z={class:"page-header"},Q={class:"header-actions"},j={class:"btn-primary"},A={class:"filters-bar"},I={key:0,class:"loading"},K={key:1,class:"media-grid"},W={class:"media-preview"},q=["src","alt"],G={key:1,class:"file-icon"},H={class:"media-info"},J={class:"media-title"},O={class:"media-size"},P={class:"media-actions"},R=["onClick"],X={key:0,class:"empty-state"};function Y(n,t,u,a,h,y){const m=F("Toast");return l(),r("div",V,[o("div",z,[t[4]||(t[4]=o("h2",null,"ðŸ–¼ï¸ Media Library",-1)),o("div",Q,[o("label",j,[t[3]||(t[3]=x(" ðŸ“¤ Upload Files ")),o("input",{type:"file",multiple:"",onChange:t[0]||(t[0]=(...e)=>a.handleFileUpload&&a.handleFileUpload(...e)),style:{display:"none"}},null,32)])])]),o("div",A,[U(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.searchQuery=e),type:"text",placeholder:"Search media...",class:"search-input"},null,512),[[L,a.searchQuery]])]),a.loading?(l(),r("div",I,"Loading media...")):(l(),r("div",K,[(l(!0),r(S,null,B(a.media,e=>{var f;return l(),r("div",{key:e.id,class:"media-item"},[o("div",W,[(f=e.type)!=null&&f.startsWith("image")?(l(),r("img",{key:0,src:e.url,alt:e.title},null,8,q)):(l(),r("div",G,"ðŸ“„"))]),o("div",H,[o("p",J,w(e.title||"Untitled"),1),o("p",O,w(a.formatSize(e.size)),1)]),o("div",P,[o("button",{onClick:v=>a.deleteMedia(e.id),class:"btn-sm btn-danger"},"Delete",8,R)])])}),128)),a.media.length===0?(l(),r("div",X,"No media files found")):C("",!0)])),D(m,{show:a.showToast,"onUpdate:show":t[2]||(t[2]=e=>a.showToast=e),type:a.toastType,title:a.toastTitle,message:a.toastMessage},null,8,["show","type","title","message"])])}const ae=M(N,[["render",Y],["__scopeId","data-v-84120aba"]]);export{ae as default};
