import{_ as S,r as d,x as A,o,c as i,a as t,g as m,h as C,K as N,F as x,b as D,t as l,j as w,l as V}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as $,a as E,S as I}from"./central-v1-ce42f893.js";const T={class:"stores-page"},B={class:"filters-bar"},F={class:"search-box"},M={class:"table-container"},L={key:0,class:"loading-overlay"},P={key:1,class:"stores-table"},U={key:0},j={class:"store-info"},K={class:"store-name"},Q=["href"],R={class:"tenant-badge"},q={class:"action-buttons"},z=["onClick"],G=["onClick"],H=["onClick"],J={key:0,class:"pagination"},O=["disabled"],W={class:"pagination-info"},X=["disabled"],Y={__name:"Stores",setup(Z){$();const u=d([]),c=d(!1),p=d(""),v=d(""),s=d({current_page:1,last_page:1,per_page:20,total:0});let _=null;const r=async(n=1)=>{c.value=!0;try{const e={page:n,per_page:s.value.per_page};p.value&&(e.search=p.value),v.value&&(e.status=v.value);const a=await E.subscriptions.stores(e);a.data.success&&(u.value=a.data.data||[],a.data.meta&&(s.value=a.data.meta))}catch(e){console.error("Error loading stores:",e),u.value=[]}finally{c.value=!1}},h=()=>{clearTimeout(_),_=setTimeout(()=>{r(1)},500)},f=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",b=n=>{console.log("View store:",n)},y=n=>{console.log("Edit store:",n)},k=async n=>{if(confirm(`Are you sure you want to delete store "${n.name||n.store_name}"?`))try{await r(s.value.current_page)}catch(e){console.error("Error deleting store:",e),alert("Failed to delete store")}};return A(()=>{r()}),(n,e)=>(o(),i("div",T,[e[9]||(e[9]=t("div",{class:"page-header"},[t("div",null,[t("h1",{class:"page-title"},"ðŸª All Stores"),t("p",{class:"page-subtitle"},"Manage all tenant stores")])],-1)),t("div",B,[t("div",F,[m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),placeholder:"Search stores...",class:"search-input",onInput:h},null,544),[[C,p.value]])]),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),class:"filter-select",onChange:e[2]||(e[2]=a=>r(1))},e[5]||(e[5]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"suspended"},"Suspended",-1)]),544),[[N,v.value]])]),t("div",M,[c.value?(o(),i("div",L,e[6]||(e[6]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading stores...",-1)]))):(o(),i("table",P,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Store Name"),t("th",null,"Domain"),t("th",null,"Tenant ID"),t("th",null,"Plan"),t("th",null,"Status"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[u.value.length===0?(o(),i("tr",U,e[7]||(e[7]=[t("td",{colspan:"8",class:"empty-cell"}," No stores found ",-1)]))):(o(!0),i(x,{key:1},D(u.value,a=>(o(),i("tr",{key:a.id},[t("td",null,l(a.id),1),t("td",null,[t("div",j,[t("div",K,l(a.name||a.store_name||"N/A"),1)])]),t("td",null,[t("a",{href:"http://"+(a.domain||a.old_domain),target:"_blank",class:"domain-link"},l(a.domain||a.old_domain||"N/A"),9,Q)]),t("td",null,[t("span",R,l(a.tenant_id||"N/A"),1)]),t("td",null,l(a.plan_name||a.package_name||"N/A"),1),t("td",null,[V(I,{status:a.status||"active"},null,8,["status"])]),t("td",null,l(f(a.created_at)),1),t("td",null,[t("div",q,[t("button",{class:"btn-icon",onClick:g=>b(a),title:"View"}," ðŸ‘ï¸ ",8,z),t("button",{class:"btn-icon",onClick:g=>y(a),title:"Edit"}," âœï¸ ",8,G),t("button",{class:"btn-icon btn-danger",onClick:g=>k(a),title:"Delete"}," ðŸ—‘ï¸ ",8,H)])])]))),128))])]))]),!c.value&&u.value.length>0&&s.value.last_page>1?(o(),i("div",J,[t("button",{class:"pagination-btn",disabled:s.value.current_page===1,onClick:e[3]||(e[3]=a=>r(s.value.current_page-1))}," â† Previous ",8,O),t("span",W," Page "+l(s.value.current_page)+" of "+l(s.value.last_page)+" ("+l(s.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:s.value.current_page>=s.value.last_page,onClick:e[4]||(e[4]=a=>r(s.value.current_page+1))}," Next â†’ ",8,X)])):w("",!0)]))}},at=S(Y,[["__scopeId","data-v-1f76c7fa"]]);export{at as default};
