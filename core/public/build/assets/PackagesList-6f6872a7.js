import{_ as B,r as s,p as T,x as F,k as y,o as A,c as E,a as o,l as i,J as u,g as h,h as N,K as U,f as P,t as V}from"./_plugin-vue_export-helper-335f4554.js";import{S as C,u as I,a as w}from"./central-v1-c4e0d34f.js";import{D as L}from"./DataTable-c3648ff2.js";import{T as Q}from"./Toast-2332f712.js";const K={name:"PackagesList",components:{DataTable:L,StatusBadge:C,Toast:Q},setup(){I();const d=s(!1),e=s([]),g=s(""),a=s(""),n=s(1),f=s(1),c=s(0),p=s(20),m=s(!1),v=s("success"),t=s(""),_=s(""),S=[{key:"id",label:"ID",sortable:!0},{key:"title",label:"Title",sortable:!0},{key:"price",label:"Price",sortable:!0},{key:"type",label:"Type",sortable:!1},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1}],k=async()=>{d.value=!0;try{const l={page:n.value,per_page:p.value,search:g.value,status:a.value},r=await w.plans.list(l);r.data.success&&(e.value=r.data.data.data||r.data.data||[],c.value=r.data.data.total||e.value.length,f.value=r.data.data.last_page||1)}catch(l){console.error("Error fetching packages:",l),b("error","Error","Failed to load packages")}finally{d.value=!1}},x=async l=>{if(confirm("Are you sure you want to delete this package?"))try{await w.plans.delete(l),b("success","Success","Package deleted successfully"),k()}catch{b("error","Error","Failed to delete package")}},D=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KWD"}).format(l||0),b=(l,r,M)=>{v.value=l,t.value=r,_.value=M,m.value=!0};return T([g,a],()=>{n.value=1,k()}),T(n,()=>{k()}),F(()=>{k()}),{loading:d,packages:e,columns:S,searchQuery:g,statusFilter:a,currentPage:n,totalPages:f,total:c,perPage:p,showToast:m,toastType:v,toastTitle:t,toastMessage:_,deletePackage:x,formatPrice:D}}},J={class:"packages-page"},R={class:"page-header"},W={class:"filters-bar"},j={class:"action-buttons"},q=["onClick"];function z(d,e,g,a,n,f){const c=y("router-link"),p=y("StatusBadge"),m=y("DataTable"),v=y("Toast");return A(),E("div",J,[o("div",R,[e[5]||(e[5]=o("div",null,[o("h2",null,"ðŸ“¦ Packages Management"),o("p",{class:"page-subtitle"},"Manage pricing plans and packages")],-1)),i(c,{to:"/packages/create",class:"btn-primary"},{default:u(()=>e[4]||(e[4]=[P("âž• Add New Package")])),_:1})]),o("div",W,[h(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.searchQuery=t),type:"text",placeholder:"Search packages...",class:"search-input"},null,512),[[N,a.searchQuery]]),h(o("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.statusFilter=t),class:"filter-select"},e[6]||(e[6]=[o("option",{value:""},"All Status",-1),o("option",{value:"1"},"Active",-1),o("option",{value:"0"},"Inactive",-1)]),512),[[U,a.statusFilter]])]),i(m,{columns:a.columns,data:a.packages,loading:a.loading,pagination:!0,"current-page":a.currentPage,"total-pages":a.totalPages,total:a.total,"per-page":a.perPage,"onUpdate:currentPage":e[2]||(e[2]=t=>a.currentPage=t)},{"cell-status":u(({value:t})=>[i(p,{status:t?"active":"inactive"},null,8,["status"])]),"cell-price":u(({value:t})=>[P(V(a.formatPrice(t)),1)]),"cell-actions":u(({row:t})=>[o("div",j,[i(c,{to:`/packages/${t.id}/edit`,class:"btn-sm btn-secondary"},{default:u(()=>e[7]||(e[7]=[P("Edit")])),_:2},1032,["to"]),o("button",{onClick:_=>a.deletePackage(t.id),class:"btn-sm btn-danger"},"Delete",8,q)])]),_:1},8,["columns","data","loading","current-page","total-pages","total","per-page"]),i(v,{show:a.showToast,"onUpdate:show":e[3]||(e[3]=t=>a.showToast=t),type:a.toastType,title:a.toastTitle,message:a.toastMessage},null,8,["show","type","title","message"])])}const Y=B(K,[["render",z],["__scopeId","data-v-542410a6"]]);export{Y as default};
