import{_ as S,r as d,x as A,o,c as l,a as t,g,h as N,K as w,u as x,F as V,b as $,t as i,j as f,l as F,z as B}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as I,a as T,S as h}from"./central-v1-ce42f893.js";const E={class:"custom-domains-page"},L={class:"filters-bar"},M={class:"search-box"},P={class:"table-container"},U={key:0,class:"loading-overlay"},j={key:1,class:"domains-table"},z={key:0},K=["href"],O={class:"old-domain"},Q={class:"tenant-badge"},R={key:1},q={class:"action-buttons"},G=["onClick"],H=["onClick"],J=["onClick"],W={key:0,class:"pagination"},X=["disabled"],Y={class:"pagination-info"},Z=["disabled"],tt={__name:"CustomDomains",setup(et){I();const r=d([]),c=d(!1),p=d(""),v=d(""),s=d({current_page:1,last_page:1,per_page:20,total:0});let _=null;const u=async(n=1)=>{c.value=!0;try{const e={page:n,per_page:s.value.per_page};p.value&&(e.search=p.value),v.value&&(e.status=v.value);const a=await T.subscriptions.customDomains(e);a.data.success&&(r.value=a.data.data||[],a.data.meta&&(s.value=a.data.meta))}catch(e){console.error("Error loading domains:",e),r.value=[]}finally{c.value=!1}},y=()=>{clearTimeout(_),_=setTimeout(()=>{u(1)},500)},b=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",k=n=>{console.log("View domain:",n)},D=async n=>{if(confirm(`Approve custom domain "${n.custom_domain}"?`))try{await u(s.value.current_page),alert("Domain approved successfully")}catch(e){console.error("Error approving domain:",e),alert("Failed to approve domain")}},C=async n=>{if(confirm(`Are you sure you want to delete custom domain "${n.custom_domain}"?`))try{await u(s.value.current_page),alert("Domain deleted successfully")}catch(e){console.error("Error deleting domain:",e),alert("Failed to delete domain")}};return A(()=>{u()}),(n,e)=>(o(),l("div",E,[e[9]||(e[9]=t("div",{class:"page-header"},[t("div",null,[t("h1",{class:"page-title"},"ðŸŒ Custom Domains"),t("p",{class:"page-subtitle"},"Manage tenant custom domains")])],-1)),t("div",L,[t("div",M,[g(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),placeholder:"Search domains...",class:"search-input",onInput:y},null,544),[[N,p.value]])]),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),class:"filter-select",onChange:e[2]||(e[2]=a=>u(1))},e[5]||(e[5]=[x('<option value="" data-v-5a7775df>All Status</option><option value="active" data-v-5a7775df>Active</option><option value="pending" data-v-5a7775df>Pending</option><option value="failed" data-v-5a7775df>Failed</option><option value="inactive" data-v-5a7775df>Inactive</option>',5)]),544),[[w,v.value]])]),t("div",P,[c.value?(o(),l("div",U,e[6]||(e[6]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading domains...",-1)]))):(o(),l("table",j,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Custom Domain"),t("th",null,"Old Domain"),t("th",null,"Tenant ID"),t("th",null,"Status"),t("th",null,"SSL Status"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[r.value.length===0?(o(),l("tr",z,e[7]||(e[7]=[t("td",{colspan:"8",class:"empty-cell"}," No custom domains found ",-1)]))):(o(!0),l(V,{key:1},$(r.value,a=>(o(),l("tr",{key:a.id},[t("td",null,i(a.id),1),t("td",null,[t("a",{href:"http://"+a.custom_domain,target:"_blank",class:"domain-link"},i(a.custom_domain||"N/A"),9,K)]),t("td",null,[t("span",O,i(a.old_domain||"N/A"),1)]),t("td",null,[t("span",Q,i(a.tenant_id||"N/A"),1)]),t("td",null,[F(h,{status:a.status||"pending"},null,8,["status"])]),t("td",null,[a.ssl_status!==void 0?(o(),B(h,{key:0,status:a.ssl_status?"active":"inactive"},null,8,["status"])):(o(),l("span",R,"-"))]),t("td",null,i(b(a.created_at)),1),t("td",null,[t("div",q,[a.status==="pending"?(o(),l("button",{key:0,class:"btn-icon btn-success",onClick:m=>D(a),title:"Approve"}," âœ… ",8,G)):f("",!0),t("button",{class:"btn-icon",onClick:m=>k(a),title:"View"}," ðŸ‘ï¸ ",8,H),t("button",{class:"btn-icon btn-danger",onClick:m=>C(a),title:"Delete"}," ðŸ—‘ï¸ ",8,J)])])]))),128))])]))]),!c.value&&r.value.length>0&&s.value.last_page>1?(o(),l("div",W,[t("button",{class:"pagination-btn",disabled:s.value.current_page===1,onClick:e[3]||(e[3]=a=>u(s.value.current_page-1))}," â† Previous ",8,X),t("span",Y," Page "+i(s.value.current_page)+" of "+i(s.value.last_page)+" ("+i(s.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:s.value.current_page>=s.value.last_page,onClick:e[4]||(e[4]=a=>u(s.value.current_page+1))}," Next â†’ ",8,Z)])):f("",!0)]))}},nt=S(tt,[["__scopeId","data-v-5a7775df"]]);export{nt as default};
