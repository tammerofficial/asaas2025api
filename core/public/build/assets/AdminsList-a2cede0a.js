import{S,a as _}from"./central-v1-c4e0d34f.js";import{D as C}from"./DataTable-c3648ff2.js";import{T as D}from"./Toast-2332f712.js";import{_ as P,r as o,p as x,x as E,k as b,o as B,c as M,a as n,l as i,J as v,f as T,n as N,t as F}from"./_plugin-vue_export-helper-335f4554.js";const L={name:"AdminsList",components:{DataTable:C,StatusBadge:S,Toast:D},setup(){const d=o(!1),e=o([]),u=o(1),t=o(1),f=o(0),y=o(20),c=o(!1),m=o("success"),g=o(""),p=o(""),s=[{key:"id",label:"ID",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"username",label:"Username",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"created_at",label:"Created",sortable:!0},{key:"actions",label:"Actions",sortable:!1}],l=async()=>{d.value=!0;try{const a=await _.admins.list({page:u.value,per_page:y.value});a.data.success&&(e.value=a.data.data.data||a.data.data||[],f.value=a.data.data.total||e.value.length,t.value=a.data.data.last_page||1)}catch(a){console.error("Error fetching admins:",a),r("error","Error","Failed to load admins")}finally{d.value=!1}},A=async a=>{try{a.status?(await _.admins.deactivate(a.id),r("success","Success","Admin deactivated successfully")):(await _.admins.activate(a.id),r("success","Success","Admin activated successfully")),l()}catch{r("error","Error","Failed to update admin status")}},h=async a=>{if(confirm("Are you sure you want to delete this admin?"))try{await _.admins.delete(a),r("success","Success","Admin deleted successfully"),l()}catch{r("error","Error","Failed to delete admin")}},r=(a,k,w)=>{m.value=a,g.value=k,p.value=w,c.value=!0};return x(u,()=>{l()}),E(()=>{l()}),{loading:d,admins:e,columns:s,currentPage:u,totalPages:t,total:f,perPage:y,showToast:c,toastType:m,toastTitle:g,toastMessage:p,toggleStatus:A,deleteAdmin:h}}},U={class:"admins-page"},V={class:"page-header"},I={class:"action-buttons"},z=["onClick"],J=["onClick"];function j(d,e,u,t,f,y){const c=b("router-link"),m=b("StatusBadge"),g=b("DataTable"),p=b("Toast");return B(),M("div",U,[n("div",V,[e[3]||(e[3]=n("div",null,[n("h2",null,"ðŸ‘¥ Admins Management"),n("p",{class:"page-subtitle"},"Manage admin users")],-1)),i(c,{to:"/admins/create",class:"btn-primary"},{default:v(()=>e[2]||(e[2]=[T("âž• Add New Admin")])),_:1})]),i(g,{columns:t.columns,data:t.admins,loading:t.loading,pagination:!0,"current-page":t.currentPage,"total-pages":t.totalPages,total:t.total,"per-page":t.perPage,"onUpdate:currentPage":e[0]||(e[0]=s=>t.currentPage=s)},{"cell-status":v(({value:s})=>[i(m,{status:s?"active":"inactive"},null,8,["status"])]),"cell-actions":v(({row:s})=>[n("div",I,[i(c,{to:`/admins/${s.id}/edit`,class:"btn-sm btn-secondary"},{default:v(()=>e[4]||(e[4]=[T("Edit")])),_:2},1032,["to"]),n("button",{onClick:l=>t.toggleStatus(s),class:N(["btn-sm",s.status?"btn-warning":"btn-success"])},F(s.status?"Deactivate":"Activate"),11,z),n("button",{onClick:l=>t.deleteAdmin(s.id),class:"btn-sm btn-danger"},"Delete",8,J)])]),_:1},8,["columns","data","loading","current-page","total-pages","total","per-page"]),i(p,{show:t.showToast,"onUpdate:show":e[1]||(e[1]=s=>t.showToast=s),type:t.toastType,title:t.toastTitle,message:t.toastMessage},null,8,["show","type","title","message"])])}const O=P(L,[["render",j],["__scopeId","data-v-f198aab3"]]);export{O as default};
