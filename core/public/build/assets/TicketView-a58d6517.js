import{_ as w,r as c,x as b,k as x,o,c as i,a as e,t as l,l as y,J as T,n as V,F as C,b as N,g as D,h as M,j as S,f as B}from"./_plugin-vue_export-helper-80b3f0a9.js";import{b as F,S as L,a as g}from"./central-v1-ce42f893.js";const A={class:"ticket-view-page"},E={class:"page-header"},R={class:"page-title"},U={class:"page-subtitle"},j={key:0,class:"loading-overlay"},z={key:1,class:"ticket-container"},I={class:"ticket-card"},J={class:"ticket-header"},q={class:"ticket-meta"},G={class:"meta-item"},H={class:"ticket-description"},K={class:"messages-card"},O={key:0,class:"empty-state"},P={key:1,class:"messages-list"},Q={class:"message-header"},W={class:"message-date"},X={class:"message-text"},Y={class:"reply-card"},Z={class:"reply-form"},$={class:"form-actions"},ee=["disabled"],te={key:0},se={key:1},ae={__name:"TicketView",setup(oe){const _=F(),r=c(!1),a=c(null),u=c([]),d=c(""),p=async()=>{r.value=!0;try{const s=await g.support.ticket(_.params.id);s.data.success&&(a.value=s.data.data,u.value=s.data.data.messages||s.data.data.replies||[])}catch(s){console.error("Error fetching ticket:",s),alert("Failed to load ticket")}finally{r.value=!1}},k=async()=>{if(d.value.trim()){r.value=!0;try{await g.support.addMessage(_.params.id,d.value),d.value="",await p()}catch(s){console.error("Error adding message:",s),alert("Failed to add message")}finally{r.value=!1}}},v=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return b(()=>{p()}),(s,t)=>{var m,h;const f=x("router-link");return o(),i("div",A,[e("div",E,[e("div",null,[e("h1",R,"üé´ Ticket #"+l(((m=a.value)==null?void 0:m.id)||"..."),1),e("p",U,l(((h=a.value)==null?void 0:h.title)||"Loading..."),1)]),y(f,{to:"/support",class:"btn btn-secondary"},{default:T(()=>t[1]||(t[1]=[B(" ‚Üê Back to Tickets ")])),_:1})]),r.value?(o(),i("div",j,t[2]||(t[2]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading ticket...",-1)]))):a.value?(o(),i("div",z,[e("div",I,[e("div",J,[e("div",q,[y(L,{status:a.value.status||"open"},null,8,["status"]),e("span",{class:V(["priority-badge",a.value.priority||"medium"])},l((a.value.priority||"medium").toUpperCase()),3),e("span",G,"Created: "+l(v(a.value.created_at)),1)])]),e("div",H,[t[3]||(t[3]=e("h3",null,"Description",-1)),e("p",null,l(a.value.description||a.value.content||"No description provided"),1)])]),e("div",K,[t[4]||(t[4]=e("h3",{class:"section-title"},"üí¨ Messages",-1)),u.value.length===0?(o(),i("div",O," No messages yet ")):(o(),i("div",P,[(o(!0),i(C,null,N(u.value,n=>(o(),i("div",{key:n.id,class:"message-item"},[e("div",Q,[e("strong",null,l(n.user_name||n.author||"Admin"),1),e("span",W,l(v(n.created_at)),1)]),e("div",X,l(n.message||n.content),1)]))),128))]))]),e("div",Y,[t[5]||(t[5]=e("h3",{class:"section-title"},"‚úèÔ∏è Add Reply",-1)),e("div",Z,[D(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=n=>d.value=n),class:"form-textarea",rows:"5",placeholder:"Type your reply here..."},null,512),[[M,d.value]]),e("div",$,[e("button",{onClick:k,class:"btn btn-primary",disabled:!d.value.trim()||r.value},[r.value?(o(),i("span",te,"‚è≥ Sending...")):(o(),i("span",se,"üì§ Send Reply"))],8,ee)])])])])):S("",!0)])}}},le=w(ae,[["__scopeId","data-v-dc1c179c"]]);export{le as default};
