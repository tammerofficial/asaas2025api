import{_ as U,r as p,x as D,k as E,o as n,c as i,a as t,l as y,J as k,w as N,f as v,g as u,h as m,n as _,t as g,j as f,K as w,F as q,b as F}from"./_plugin-vue_export-helper-25c71bc9.js";import{u as M,a as C}from"./central-v1-43971805.js";const h={class:"blog-create-page"},L={class:"page-header"},T={class:"form-container"},I={class:"form-grid"},P={class:"form-main"},j={class:"form-group"},z={key:0,class:"error-message"},A={class:"form-group"},J={key:0,class:"error-message"},K={class:"form-group"},O={key:0,class:"error-message"},R={class:"form-sidebar"},$={class:"form-group"},G={class:"form-group"},H=["value"],Q={key:0,class:"error-message"},W={class:"form-group"},X={class:"form-actions"},Y=["disabled"],Z={key:0},ee={key:1},te={__name:"BlogCreate",setup(se){const x=M(),c=p(!1),o=p({title:"",slug:"",blog_content:"",status:"draft",category_id:"",created_at:new Date().toISOString().slice(0,16)}),a=p({}),b=p([]),S=async()=>{try{const l=await C.blog.categories({per_page:100});l.data.success&&(b.value=l.data.data)}catch(l){console.error("Error loading categories:",l)}},B=l=>l.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),V=async()=>{var l,e,d,s;a.value={},c.value=!0;try{!o.value.slug&&o.value.title&&(o.value.slug=B(o.value.title));const r=await C.blog.create(o.value);r.data.success?x.push("/blog"):r.data.errors?a.value=r.data.errors:alert("Failed to create blog: "+(r.data.message||"Unknown error"))}catch(r){console.error("Error creating blog:",r),(e=(l=r.response)==null?void 0:l.data)!=null&&e.errors?a.value=r.response.data.errors:alert("Failed to create blog: "+(((s=(d=r.response)==null?void 0:d.data)==null?void 0:s.message)||"Unknown error"))}finally{c.value=!1}};return D(()=>{S()}),(l,e)=>{const d=E("router-link");return n(),i("div",h,[t("div",L,[e[7]||(e[7]=t("div",null,[t("h1",{class:"page-title"},"âž• Add New Blog"),t("p",{class:"page-subtitle"},"Create a new blog post")],-1)),y(d,{to:"/blog",class:"btn btn-secondary"},{default:k(()=>e[6]||(e[6]=[v(" â† Back to Blogs ")])),_:1})]),t("div",T,[t("form",{onSubmit:N(V,["prevent"])},[t("div",I,[t("div",P,[t("div",j,[e[8]||(e[8]=t("label",{for:"title",class:"form-label"},[v(" Title "),t("span",{class:"required"},"*")],-1)),u(t("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.title=s),class:_(["form-input",{error:a.value.title}]),placeholder:"Enter blog title",required:""},null,2),[[m,o.value.title]]),a.value.title?(n(),i("span",z,g(a.value.title),1)):f("",!0)]),t("div",A,[e[9]||(e[9]=t("label",{for:"slug",class:"form-label"},"Slug",-1)),u(t("input",{type:"text",id:"slug","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.slug=s),class:_(["form-input",{error:a.value.slug}]),placeholder:"blog-post-slug (auto-generated)"},null,2),[[m,o.value.slug]]),a.value.slug?(n(),i("span",J,g(a.value.slug),1)):f("",!0),e[10]||(e[10]=t("small",{class:"form-help"},"Leave empty to auto-generate from title",-1))]),t("div",K,[e[11]||(e[11]=t("label",{for:"blog_content",class:"form-label"},[v(" Content "),t("span",{class:"required"},"*")],-1)),u(t("textarea",{id:"blog_content","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.blog_content=s),class:_(["form-textarea",{error:a.value.blog_content}]),rows:"12",placeholder:"Enter blog content",required:""},null,2),[[m,o.value.blog_content]]),a.value.blog_content?(n(),i("span",O,g(a.value.blog_content),1)):f("",!0)])]),t("div",R,[t("div",$,[e[13]||(e[13]=t("label",{for:"status",class:"form-label"},"Status",-1)),u(t("select",{id:"status","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.status=s),class:"form-select"},e[12]||(e[12]=[t("option",{value:"draft"},"Draft",-1),t("option",{value:"publish"},"Publish",-1)]),512),[[w,o.value.status]])]),t("div",G,[e[15]||(e[15]=t("label",{for:"category_id",class:"form-label"},"Category",-1)),u(t("select",{id:"category_id","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.category_id=s),class:_(["form-select",{error:a.value.category_id}])},[e[14]||(e[14]=t("option",{value:""},"Select Category",-1)),(n(!0),i(q,null,F(b.value,s=>(n(),i("option",{key:s.id,value:s.id},g(s.name),9,H))),128))],2),[[w,o.value.category_id]]),a.value.category_id?(n(),i("span",Q,g(a.value.category_id),1)):f("",!0)]),t("div",W,[e[16]||(e[16]=t("label",{for:"created_at",class:"form-label"},"Publish Date",-1)),u(t("input",{type:"datetime-local",id:"created_at","onUpdate:modelValue":e[5]||(e[5]=s=>o.value.created_at=s),class:"form-input"},null,512),[[m,o.value.created_at]])])])]),t("div",X,[t("button",{type:"submit",class:"btn btn-primary",disabled:c.value},[c.value?(n(),i("span",Z,"â³ Saving...")):(n(),i("span",ee,"ðŸ’¾ Save Blog"))],8,Y),y(d,{to:"/blog",class:"btn btn-secondary"},{default:k(()=>e[17]||(e[17]=[v(" Cancel ")])),_:1})])],32)])])}}},le=U(te,[["__scopeId","data-v-ea568a0d"]]);export{le as default};
