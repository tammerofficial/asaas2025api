import{_ as $,r as c,x as w,k as D,o as n,c as l,a as t,g as b,h as N,K as A,u as V,F as B,b as E,t as i,j as y,z as T,J as F,f as P,l as M}from"./_plugin-vue_export-helper-80b3f0a9.js";import{a as m,S as I}from"./central-v1-ce42f893.js";const L={class:"comments-page"},U={class:"filters-bar"},j={class:"search-box"},z={class:"table-container"},J={key:0,class:"loading-overlay"},K={key:1,class:"comments-table"},Q={key:0},q={class:"author-info"},G={class:"comment-text"},H={key:1},O={class:"action-buttons"},R=["onClick"],W=["onClick"],X=["onClick"],Y={key:0,class:"pagination"},Z=["disabled"],tt={class:"pagination-info"},et=["disabled"],at={__name:"Comments",setup(ot){const d=c([]),p=c(!1),v=c(""),_=c(""),o=c({current_page:1,last_page:1,per_page:20,total:0});let g=null;const r=async(s=1)=>{p.value=!0;try{const e={page:s,per_page:o.value.per_page};v.value&&(e.search=v.value),_.value&&(e.status=_.value);const u=await m.blog.comments(e);u.data.success&&(d.value=u.data.data||[],u.data.meta&&(o.value=u.data.meta))}catch(e){console.error("Error loading comments:",e),d.value=[]}finally{p.value=!1}},f=()=>{clearTimeout(g),g=setTimeout(()=>{r(1)},500)},k=async s=>{try{await m.blog.update(`comments/${s.id}`,{status:"approved"}),await r(o.value.current_page)}catch(e){console.error("Error approving comment:",e),alert("Failed to approve comment")}},C=s=>{alert(`Edit comment: ${s.id}`)},x=async s=>{if(confirm("Are you sure you want to delete this comment?"))try{await m.blog.delete(`comments/${s.id}`),await r(o.value.current_page)}catch(e){console.error("Error deleting comment:",e),alert("Failed to delete comment")}},S=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return w(()=>{r()}),(s,e)=>{const u=D("router-link");return n(),l("div",L,[e[9]||(e[9]=t("div",{class:"page-header"},[t("div",null,[t("h1",{class:"page-title"},"ðŸ’¬ Blog Comments"),t("p",{class:"page-subtitle"},"Manage blog comments")])],-1)),t("div",U,[t("div",j,[b(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),placeholder:"Search comments...",class:"search-input",onInput:f},null,544),[[N,v.value]])]),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),class:"filter-select",onChange:e[2]||(e[2]=a=>r(1))},e[5]||(e[5]=[V('<option value="" data-v-71a63735>All Status</option><option value="approved" data-v-71a63735>Approved</option><option value="pending" data-v-71a63735>Pending</option><option value="spam" data-v-71a63735>Spam</option><option value="trash" data-v-71a63735>Trash</option>',5)]),544),[[A,_.value]])]),t("div",z,[p.value?(n(),l("div",J,e[6]||(e[6]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading comments...",-1)]))):(n(),l("table",K,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Author"),t("th",null,"Comment"),t("th",null,"Post"),t("th",null,"Status"),t("th",null,"Date"),t("th",null,"Actions")])],-1)),t("tbody",null,[d.value.length===0?(n(),l("tr",Q,e[7]||(e[7]=[t("td",{colspan:"7",class:"empty-cell"}," No comments found ",-1)]))):(n(!0),l(B,{key:1},E(d.value,a=>(n(),l("tr",{key:a.id},[t("td",null,i(a.id),1),t("td",null,[t("div",q,[t("strong",null,i(a.author_name||a.name),1),t("small",null,i(a.author_email||a.email),1)])]),t("td",null,[t("div",G,i(a.comment||a.content),1)]),t("td",null,[a.post_id?(n(),T(u,{key:0,to:`/blog/${a.post_id}`,class:"post-link"},{default:F(()=>[P(" Post #"+i(a.post_id),1)]),_:2},1032,["to"])):(n(),l("span",H,"-"))]),t("td",null,[M(I,{status:a.status||"pending"},null,8,["status"])]),t("td",null,i(S(a.created_at)),1),t("td",null,[t("div",O,[a.status!=="approved"?(n(),l("button",{key:0,class:"btn-icon btn-success",onClick:h=>k(a),title:"Approve"}," âœ“ ",8,R)):y("",!0),t("button",{class:"btn-icon",onClick:h=>C(a),title:"Edit"}," âœï¸ ",8,W),t("button",{class:"btn-icon btn-danger",onClick:h=>x(a),title:"Delete"}," ðŸ—‘ï¸ ",8,X)])])]))),128))])]))]),!p.value&&d.value.length>0&&o.value.last_page>1?(n(),l("div",Y,[t("button",{class:"pagination-btn",disabled:o.value.current_page===1,onClick:e[3]||(e[3]=a=>r(o.value.current_page-1))}," â† Previous ",8,Z),t("span",tt," Page "+i(o.value.current_page)+" of "+i(o.value.last_page)+" ("+i(o.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:o.value.current_page>=o.value.last_page,onClick:e[4]||(e[4]=a=>r(o.value.current_page+1))}," Next â†’ ",8,et)])):y("",!0)])}}},lt=$(at,[["__scopeId","data-v-71a63735"]]);export{lt as default};
