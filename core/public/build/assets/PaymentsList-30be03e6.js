import{_ as S,r as u,x,o,c as i,a as t,g as _,h as D,K as b,u as y,F as V,b as F,t as l,j as N,l as w}from"./_plugin-vue_export-helper-80b3f0a9.js";import{u as T,a as A,S as L}from"./central-v1-ce42f893.js";const $={class:"payments-page"},B={class:"filters-bar"},I={class:"search-box"},M={class:"table-container"},U={key:0,class:"loading-overlay"},E={key:1,class:"payments-table"},K={key:0},j={class:"order-id"},O={class:"tenant-id"},Q={class:"amount-text"},R={class:"method-badge"},W={class:"action-buttons"},q=["onClick"],z={key:0,class:"pagination"},G=["disabled"],H={class:"pagination-info"},J=["disabled"],X={__name:"PaymentsList",setup(Y){const f=T(),r=u([]),p=u(!1),c=u(""),v=u(""),m=u(""),n=u({current_page:1,last_page:1,per_page:20,total:0});let g=null;const d=async(s=1)=>{p.value=!0;try{const e={page:s,per_page:n.value.per_page};c.value&&(e.search=c.value),v.value&&(e.status=v.value),m.value&&(e.payment_method=m.value);const a=await A.payments.list(e);a.data.success&&(r.value=a.data.data||[],a.data.meta&&(n.value=a.data.meta))}catch(e){console.error("Error loading payments:",e),r.value=[]}finally{p.value=!1}},h=()=>{clearTimeout(g),g=setTimeout(()=>{d(1)},500)},k=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KWD",minimumFractionDigits:3,maximumFractionDigits:3}).format(s||0),C=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",P=s=>{f.push(`/payments/${s.id}`)};return x(()=>{d()}),(s,e)=>(o(),i("div",$,[e[12]||(e[12]=t("div",{class:"page-header"},[t("div",null,[t("h1",{class:"page-title"},"ðŸ’³ Payments"),t("p",{class:"page-subtitle"},"View and manage all payments")])],-1)),t("div",B,[t("div",I,[_(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),placeholder:"Search payments...",class:"search-input",onInput:h},null,544),[[D,c.value]])]),_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),class:"filter-select",onChange:e[2]||(e[2]=a=>d(1))},e[7]||(e[7]=[y('<option value="" data-v-747e08db>All Status</option><option value="pending" data-v-747e08db>Pending</option><option value="completed" data-v-747e08db>Completed</option><option value="failed" data-v-747e08db>Failed</option><option value="cancelled" data-v-747e08db>Cancelled</option>',5)]),544),[[b,v.value]]),_(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),class:"filter-select",onChange:e[4]||(e[4]=a=>d(1))},e[8]||(e[8]=[y('<option value="" data-v-747e08db>All Methods</option><option value="credit_card" data-v-747e08db>Credit Card</option><option value="bank_transfer" data-v-747e08db>Bank Transfer</option><option value="paypal" data-v-747e08db>PayPal</option><option value="stripe" data-v-747e08db>Stripe</option>',5)]),544),[[b,m.value]])]),t("div",M,[p.value?(o(),i("div",U,e[9]||(e[9]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading payments...",-1)]))):(o(),i("table",E,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Order ID"),t("th",null,"Tenant"),t("th",null,"Amount"),t("th",null,"Method"),t("th",null,"Status"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[r.value.length===0?(o(),i("tr",K,e[10]||(e[10]=[t("td",{colspan:"8",class:"empty-cell"}," No payments found ",-1)]))):(o(!0),i(V,{key:1},F(r.value,a=>(o(),i("tr",{key:a.id},[t("td",null,l(a.id),1),t("td",null,[t("span",j,"#"+l(a.order_id),1)]),t("td",null,[t("span",O,"Tenant #"+l(a.tenant_id||"-"),1)]),t("td",null,[t("strong",Q,l(k(a.amount)),1)]),t("td",null,[t("span",R,l(a.payment_method||"-"),1)]),t("td",null,[w(L,{status:a.status||"pending"},null,8,["status"])]),t("td",null,l(C(a.created_at)),1),t("td",null,[t("div",W,[t("button",{class:"btn-icon",onClick:Z=>P(a),title:"View"}," ðŸ‘ï¸ ",8,q)])])]))),128))])]))]),!p.value&&r.value.length>0&&n.value.last_page>1?(o(),i("div",z,[t("button",{class:"pagination-btn",disabled:n.value.current_page===1,onClick:e[5]||(e[5]=a=>d(n.value.current_page-1))}," â† Previous ",8,G),t("span",H," Page "+l(n.value.current_page)+" of "+l(n.value.last_page)+" ("+l(n.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:n.value.current_page>=n.value.last_page,onClick:e[6]||(e[6]=a=>d(n.value.current_page+1))}," Next â†’ ",8,J)])):N("",!0)]))}},at=S(X,[["__scopeId","data-v-747e08db"]]);export{at as default};
