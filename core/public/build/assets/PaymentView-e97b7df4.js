import{_ as k,r as n,x as D,k as y,o as v,c as f,a as e,l as _,J as x,t as l,g as U,K as V,j as B,f as C}from"./_plugin-vue_export-helper-80b3f0a9.js";import{S as M,b as I,a as w}from"./central-v1-ce42f893.js";import{T as N}from"./Toast-da97317a.js";const h={name:"PaymentView",components:{StatusBadge:M,Toast:N},setup(){const m=I(),t=n(!1),i=n(null),a=n(""),p=n(!1),c=n("success"),d=n(""),r=n(""),u=async()=>{t.value=!0;try{const s=await w.payments.get(m.params.id);s.data.success&&(i.value=s.data.data,a.value=i.value.status||"pending")}catch(s){console.error("Error fetching payment:",s)}finally{t.value=!1}},o=async()=>{t.value=!0;try{await w.payments.update(m.params.id,{status:a.value}),g("success","Success","Payment status updated successfully"),u()}catch{g("error","Error","Failed to update payment status")}finally{t.value=!1}},S=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KWD"}).format(s||0),P=s=>s?new Date(s).toLocaleString():"-",g=(s,T,b)=>{c.value=s,d.value=T,r.value=b,p.value=!0};return D(()=>{u()}),{loading:t,payment:i,statusUpdate:a,showToast:p,toastType:c,toastTitle:d,toastMessage:r,updateStatus:o,formatPrice:S,formatDate:P}}},E={class:"payment-view-page"},F={class:"page-header"},A={key:0,class:"loading"},K={key:1,class:"payment-details"},L={class:"detail-section"},j={class:"detail-grid"},J={class:"detail-item"},O={class:"detail-item"},R={class:"detail-item"},W={class:"detail-item"},q={class:"detail-item"},z={class:"detail-item"},G={class:"detail-section"},H={class:"form-group"};function Q(m,t,i,a,p,c){const d=y("router-link"),r=y("StatusBadge"),u=y("Toast");return v(),f("div",E,[e("div",F,[t[4]||(t[4]=e("h2",null,"ðŸ’³ Payment Details",-1)),_(d,{to:"/payments",class:"btn-secondary"},{default:x(()=>t[3]||(t[3]=[C("â† Back to Payments")])),_:1})]),a.loading?(v(),f("div",A,"Loading payment...")):a.payment?(v(),f("div",K,[e("div",L,[t[11]||(t[11]=e("h3",null,"Payment Information",-1)),e("div",j,[e("div",J,[t[5]||(t[5]=e("label",null,"Payment ID:",-1)),e("span",null,l(a.payment.id),1)]),e("div",O,[t[6]||(t[6]=e("label",null,"Order ID:",-1)),e("span",null,l(a.payment.order_id),1)]),e("div",R,[t[7]||(t[7]=e("label",null,"Amount:",-1)),e("span",null,l(a.formatPrice(a.payment.amount)),1)]),e("div",W,[t[8]||(t[8]=e("label",null,"Payment Method:",-1)),e("span",null,l(a.payment.payment_method||"-"),1)]),e("div",q,[t[9]||(t[9]=e("label",null,"Status:",-1)),_(r,{status:a.payment.status||"pending"},null,8,["status"])]),e("div",z,[t[10]||(t[10]=e("label",null,"Created At:",-1)),e("span",null,l(a.formatDate(a.payment.created_at)),1)])])]),e("div",G,[t[14]||(t[14]=e("h3",null,"Update Status",-1)),e("div",H,[t[13]||(t[13]=e("label",null,"Status",-1)),U(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.statusUpdate=o),class:"form-select"},t[12]||(t[12]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"failed"},"Failed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[V,a.statusUpdate]]),e("button",{onClick:t[1]||(t[1]=(...o)=>a.updateStatus&&a.updateStatus(...o)),class:"btn-primary",style:{"margin-top":"12px"}},"Update Status")])])])):B("",!0),_(u,{show:a.showToast,"onUpdate:show":t[2]||(t[2]=o=>a.showToast=o),type:a.toastType,title:a.toastTitle,message:a.toastMessage},null,8,["show","type","title","message"])])}const $=k(h,[["render",Q],["__scopeId","data-v-a3f29c19"]]);export{$ as default};
