import{_ as S,r as o,x,o as n,c as r,a as e,F as T,b as A,t as i,w as h,f as D,g as k,h as F,K as V,j as U,l as $}from"./_plugin-vue_export-helper-25c71bc9.js";import{a as B}from"./central-v1-43971805.js";import{T as I}from"./Toast-c9da9e99.js";const L={class:"permissions-page"},q={class:"page-header"},G={class:"page-actions"},j={class:"table-container"},K={key:0,class:"loading-overlay"},R={key:1,class:"permissions-table"},W={key:0},z={class:"permission-name"},H={class:"action-buttons"},J=["onClick"],O=["onClick"],Q={class:"modal-header"},X={class:"form-group"},Y={class:"form-group"},Z={class:"form-actions"},ee=["disabled"],se={__name:"Permissions",setup(te){const d=o([]),p=o(!1),f=o(!1),c=o(!1),m=o(!1),b=o(!1),y=o("success"),_=o(""),w=o(""),l=o({id:null,name:"",guard_name:"web"}),g=async()=>{p.value=!0;try{const t=await B.users.permissions();t.data.success&&(d.value=t.data.data||[])}catch(t){console.error("Error loading permissions:",t),d.value=[],u("error","Error","Failed to load permissions")}finally{p.value=!1}},P=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",C=t=>{l.value={id:t.id,name:t.name,guard_name:t.guard_name||"web"},c.value=!0},M=async t=>{if(confirm(`Are you sure you want to delete permission "${t.name}"?`))try{u("success","Success","Permission deleted successfully"),await g()}catch(s){console.error("Error deleting permission:",s),u("error","Error","Failed to delete permission")}},E=async()=>{m.value=!0;try{l.value.id?u("success","Success","Permission updated successfully"):u("success","Success","Permission created successfully"),v(),await g()}catch(t){console.error("Error saving permission:",t),u("error","Error","Failed to save permission")}finally{m.value=!1}},v=()=>{f.value=!1,c.value=!1,l.value={id:null,name:"",guard_name:"web"}},u=(t,s,a)=>{y.value=t,_.value=s,w.value=a,b.value=!0};return x(()=>{g()}),(t,s)=>(n(),r("div",L,[e("div",q,[s[5]||(s[5]=e("div",null,[e("h1",{class:"page-title"},"ðŸ” Permissions Management"),e("p",{class:"page-subtitle"},"Manage user permissions")],-1)),e("div",G,[e("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=a=>f.value=!0)}," âž• Add New Permission ")])]),e("div",j,[p.value?(n(),r("div",K,s[6]||(s[6]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading permissions...",-1)]))):(n(),r("table",R,[s[8]||(s[8]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Guard"),e("th",null,"Roles Count"),e("th",null,"Created At"),e("th",null,"Actions")])],-1)),e("tbody",null,[d.value.length===0?(n(),r("tr",W,s[7]||(s[7]=[e("td",{colspan:"6",class:"empty-cell"}," No permissions found ",-1)]))):(n(!0),r(T,{key:1},A(d.value,a=>(n(),r("tr",{key:a.id},[e("td",null,i(a.id),1),e("td",null,[e("div",z,[e("strong",null,i(a.name),1)])]),e("td",null,i(a.guard_name||"web"),1),e("td",null,i(a.roles_count||0),1),e("td",null,i(P(a.created_at)),1),e("td",null,[e("div",H,[e("button",{class:"btn-icon",onClick:N=>C(a),title:"Edit"}," âœï¸ ",8,J),e("button",{class:"btn-icon btn-danger",onClick:N=>M(a),title:"Delete"}," ðŸ—‘ï¸ ",8,O)])])]))),128))])]))]),f.value||c.value?(n(),r("div",{key:0,class:"modal-overlay",onClick:v},[e("div",{class:"modal-content",onClick:s[3]||(s[3]=h(()=>{},["stop"]))},[e("div",Q,[e("h3",null,i(c.value?"âœï¸ Edit Permission":"âž• Add New Permission"),1),e("button",{class:"modal-close",onClick:v},"Ã—")]),e("form",{onSubmit:h(E,["prevent"]),class:"modal-form"},[e("div",X,[s[9]||(s[9]=e("label",{class:"form-label"},[D("Permission Name "),e("span",{class:"required"},"*")],-1)),k(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>l.value.name=a),class:"form-input",placeholder:"e.g., users.create, users.update",required:""},null,512),[[F,l.value.name]]),s[10]||(s[10]=e("small",{class:"form-help"},"Format: resource.action (e.g., users.create)",-1))]),e("div",Y,[s[12]||(s[12]=e("label",{class:"form-label"},"Guard",-1)),k(e("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>l.value.guard_name=a),class:"form-select"},s[11]||(s[11]=[e("option",{value:"web"},"Web",-1),e("option",{value:"api"},"API",-1)]),512),[[V,l.value.guard_name]])]),e("div",Z,[e("button",{type:"submit",class:"btn btn-primary",disabled:m.value},i(m.value?"Saving...":"Save Permission"),9,ee),e("button",{type:"button",class:"btn btn-secondary",onClick:v}," Cancel ")])],32)])])):U("",!0),$(I,{show:b.value,"onUpdate:show":s[4]||(s[4]=a=>b.value=a),type:y.value,title:_.value,message:w.value},null,8,["show","type","title","message"])]))}},ne=S(se,[["__scopeId","data-v-d59a59a9"]]);export{ne as default};
