import{_ as V,r as d,x as D,k as L,o as i,c as r,a as t,l as f,J as N,g as m,h as U,K as h,F as A,b as F,t as o,j as M,f as P,n as B}from"./_plugin-vue_export-helper-25c71bc9.js";import{u as E,a as C,S as I}from"./central-v1-43971805.js";const j={class:"tickets-page"},z={class:"page-header"},H={class:"filters-bar"},J={class:"search-box"},K={class:"table-container"},O={key:0,class:"loading-overlay"},Q={key:1,class:"tickets-table"},R={key:0},q={class:"ticket-title"},G={class:"action-buttons"},W=["onClick"],X=["onClick"],Y=["onClick"],Z={key:0,class:"pagination"},tt=["disabled"],et={class:"pagination-info"},st=["disabled"],at={__name:"TicketsList",setup(lt){const k=E(),p=d([]),c=d(!1),v=d(""),_=d(""),g=d(""),a=d({current_page:1,last_page:1,per_page:20,total:0});let y=null;const n=async(l=1)=>{c.value=!0;try{const e={page:l,per_page:a.value.per_page};v.value&&(e.search=v.value),_.value&&(e.status=_.value),g.value&&(e.priority=g.value);const u=await C.support.tickets(e);u.data.success&&(p.value=u.data.data,u.data.meta&&(a.value=u.data.meta))}catch(e){console.error("Error loading tickets:",e),p.value=[]}finally{c.value=!1}},T=()=>{clearTimeout(y),y=setTimeout(()=>{n(1)},500)},w=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",x=l=>{k.push(`/support/${l.id}`)},S=l=>{k.push(`/support/${l.id}/edit`)},$=async l=>{if(confirm(`Are you sure you want to delete ticket "${l.title}"?`))try{await C.support.delete(l.id),await n(a.value.current_page)}catch(e){console.error("Error deleting ticket:",e),alert("Failed to delete ticket")}};return D(()=>{n()}),(l,e)=>{const u=L("router-link");return i(),r("div",j,[t("div",z,[e[8]||(e[8]=t("div",null,[t("h1",{class:"page-title"},"ðŸŽ« Support Tickets"),t("p",{class:"page-subtitle"},"Manage all support tickets")],-1)),f(u,{to:"/support/create",class:"btn btn-primary"},{default:N(()=>e[7]||(e[7]=[P(" âž• Create Ticket ")])),_:1})]),t("div",H,[t("div",J,[m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),placeholder:"Search tickets...",class:"search-input",onInput:T},null,544),[[U,v.value]])]),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),class:"filter-select",onChange:e[2]||(e[2]=s=>n(1))},e[9]||(e[9]=[t("option",{value:""},"All Status",-1),t("option",{value:"open"},"Open",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"closed"},"Closed",-1)]),544),[[h,_.value]]),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),class:"filter-select",onChange:e[4]||(e[4]=s=>n(1))},e[10]||(e[10]=[t("option",{value:""},"All Priority",-1),t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1)]),544),[[h,g.value]])]),t("div",K,[c.value?(i(),r("div",O,e[11]||(e[11]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading tickets...",-1)]))):(i(),r("table",Q,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Title"),t("th",null,"User"),t("th",null,"Status"),t("th",null,"Priority"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[p.value.length===0?(i(),r("tr",R,e[12]||(e[12]=[t("td",{colspan:"7",class:"empty-cell"}," No tickets found ",-1)]))):(i(!0),r(A,{key:1},F(p.value,s=>(i(),r("tr",{key:s.id},[t("td",null,o(s.id),1),t("td",null,[t("div",q,[t("strong",null,o(s.title),1)])]),t("td",null,o(s.user_name||"Unknown"),1),t("td",null,[f(I,{status:s.status||"open"},null,8,["status"])]),t("td",null,[t("span",{class:B(["priority-badge",s.priority||"medium"])},o((s.priority||"medium").toUpperCase()),3)]),t("td",null,o(w(s.created_at)),1),t("td",null,[t("div",G,[t("button",{class:"btn-icon",onClick:b=>x(s),title:"View"}," ðŸ‘ï¸ ",8,W),t("button",{class:"btn-icon",onClick:b=>S(s),title:"Edit"}," âœï¸ ",8,X),t("button",{class:"btn-icon btn-danger",onClick:b=>$(s),title:"Delete"}," ðŸ—‘ï¸ ",8,Y)])])]))),128))])]))]),!c.value&&p.value.length>0&&a.value.last_page>1?(i(),r("div",Z,[t("button",{class:"pagination-btn",disabled:a.value.current_page===1,onClick:e[5]||(e[5]=s=>n(a.value.current_page-1))}," â† Previous ",8,tt),t("span",et," Page "+o(a.value.current_page)+" of "+o(a.value.last_page)+" ("+o(a.value.total)+" total) ",1),t("button",{class:"pagination-btn",disabled:a.value.current_page>=a.value.last_page,onClick:e[6]||(e[6]=s=>n(a.value.current_page+1))}," Next â†’ ",8,st)])):M("",!0)])}}},it=V(at,[["__scopeId","data-v-cc489ae3"]]);export{it as default};
